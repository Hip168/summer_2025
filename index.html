<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summer Holiday</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Harmony -->
    <!-- Application Structure Plan: The application is structured as an interactive dashboard. The primary navigation allows users to select one of three destinations (Cô Tô, Quan Lạn, Quảng Bình). This choice updates the entire main content area. Within the main content for each destination, a secondary tab-based navigation allows users to explore specific aspects: an overview, a detailed cost analysis with a dynamic chart and detailed table, a day-by-day itinerary with expanded timings, and suggestions for food, lodging, and photo spots. A new "Tổng kết & So sánh" tab provides a comprehensive comparative overview of all three destinations in a table format. This layered, task-oriented structure was chosen over a linear report format to empower users to directly compare options and drill down into the information they care about most, facilitating a more efficient and user-friendly decision-making process. -->
    <!-- Visualization & Content Choices: 
        - Goal: Compare Destinations -> Method: High-level navigation buttons and a dynamic content area. Interaction: Clicking a destination button updates all displayed information. Justification: Allows for quick, direct comparison of all facets of each trip.
        - Goal: Analyze Costs -> Method: Dynamic Bar Chart (Chart.js) and a detailed cost breakdown table. Interaction: Chart and table update when a new destination is selected. Justification: A bar chart provides a clear, immediate visual comparison of where the budget is allocated, while the table gives granular financial details.
        - Goal: Organize Detailed Info -> Method: Tabbed interface (Overview, Itinerary, Costs, etc.). Interaction: Clicking tabs reveals specific content panels. Justification: Prevents information overload by breaking down a large amount of content into manageable, thematic sections.
        - Goal: Present Itinerary -> Method: Styled HTML/Tailwind vertical timeline/card layout with expanded daily plans including timings. Interaction: Static view. Justification: A visually organized timeline is more engaging and easier to follow than a plain text list, enhancing readability.
        - Goal: Inform on Specifics (Food, Lodging, Photos) -> Method: Card-based layouts using HTML/Tailwind. Interaction: Static view with hover effects. Justification: Cards provide a structured and visually appealing way to present discrete pieces of information.
        - Goal: Summarize & Compare All Destinations -> Method: Dedicated "Tổng kết & So sánh" tab with a detailed comparison table. Interaction: Clicking the tab reveals the comparison. Justification: Directly addresses the user's need for an easy-to-digest, side-by-side comparison of all options.
        - Library/Method: Chart.js for canvas-based charting; Tailwind CSS for all layout and styling; Unicode characters for icons. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f8f7f5;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            border-color: #0d9488;
            color: #0d9488;
            font-weight: 600;
        }
        .content-pane {
            display: none;
        }
        .content-pane.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }
        .timeline-item {
            position: relative;
            padding-left: 30px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 1px;
            top: 20px;
            bottom: -20px;
            width: 2px;
            background-color: #d4d4d8; /* zinc-300 */
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-dot {
            position: absolute;
            left: -9px;
            top: 12px;
            width: 20px;
            height: 20px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-700 mb-2">Kế hoạch đi du lịch</h1>
        </header>

        <nav id="main-nav" class="flex flex-wrap justify-center gap-3 sm:gap-4 mb-8 md:mb-12">
            <button data-dest="coto" class="nav-button active text-base md:text-lg font-semibold py-3 px-6 bg-white rounded-full shadow-md hover:bg-teal-500 hover:text-white">🏝️ Cô Tô</button>
            <button data-dest="quanlan" class="nav-button text-base md:text-lg font-semibold py-3 px-6 bg-white rounded-full shadow-md hover:bg-teal-500 hover:text-white">🏖️ Quan Lạn</button>
            <button data-dest="quangbinh" class="nav-button text-base md:text-lg font-semibold py-3 px-6 bg-white rounded-full shadow-md hover:bg-teal-500 hover:text-white">🏞️ Quảng Bình</button>
            <button data-dest="comparison" class="nav-button text-base md:text-lg font-semibold py-3 px-6 bg-white rounded-full shadow-md hover:bg-teal-500 hover:text-white">📊 Tổng kết & So sánh</button>
        </nav>

        <main id="main-content" class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8">
            <!-- Destination Content Panes will be injected here by JS -->
        </main>

        <footer class="text-center mt-8 text-gray-500 text-sm">
            <p>Thông tin được tổng hợp và phân tích từ báo cáo kế hoạch chi tiết.</p>
            <p>Chúc các bạn có một chuyến đi vui vẻ và đáng nhớ!</p>
        </footer>
    </div>

    <script>
        const tripData = {
            coto: {
                title: "Cô Tô - 3 Ngày 2 Đêm",
                overview: {
                    intro: "Cô Tô là hòn đảo ngọc xinh đẹp, nổi tiếng với bãi biển hoang sơ, nước trong xanh và cảnh quan kỳ vĩ. Đây là lựa chọn lý tưởng cho nhóm muốn trải nghiệm biển đảo sôi động, có nhiều hoạt động vui chơi và các điểm 'sống ảo' đã được khai thác du lịch.",
                    weather: "⚠️ **Rủi ro thời tiết cao:** Cuối tháng 7 có nguy cơ cao xảy ra bão và áp thấp nhiệt đới. Cần theo dõi dự báo thời tiết sát sao và chuẩn bị kế hoạch dự phòng.",
                    highlights: ["Bãi đá Cầu Mỵ hùng vĩ", "Đảo Cô Tô Con hoang sơ", "Con đường tình yêu lãng mạn", "Lặn ngắm san hô, BBQ bãi biển"],
                    duration: "3 Ngày / 2 Đêm",
                    costRange: "2.510.000 - 3.550.000 VNĐ/người"
                },
                costs: {
                    labels: ["Di chuyển", "Lưu trú", "Ăn uống", "Tham quan", "Phát sinh"],
                    values: [900, 600, 750, 400, 250], // in thousands VND
                    summary: "Chi phí tại Cô Tô ở mức vừa phải. Có thể tiết kiệm bằng cách ở homestay phòng lớn, thuê xe điện chung cho cả nhóm và đặt các set ăn cho nhóm.",
                    details: [
                        { category: "Di chuyển", subItems: [
                            { name: "Từ Từ Sơn đến Vân Đồn (xe 16 chỗ)", price: "240.000 - 290.000 VNĐ" },
                            { name: "Tàu cao tốc Vân Đồn - Cô Tô (khứ hồi)", price: "460.000 - 500.000 VNĐ" },
                            { name: "Phí qua cảng Vân Đồn", price: "60.000 VNĐ" },
                            { name: "Di chuyển trên đảo (xe điện/xe máy)", price: "150.000 - 300.000 VNĐ" }
                        ], total: "ước tính 900.000 VNĐ" },
                        { category: "Lưu trú (2 đêm)", subItems: [
                            { name: "Homestay/Nhà nghỉ có phòng tập thể", price: "500.000 - 700.000 VNĐ" }
                        ], total: "ước tính 600.000 VNĐ" },
                        { category: "Ăn uống (3 ngày)", subItems: [
                            { name: "Ăn tại quán địa phương, chợ, set menu/BBQ", price: "600.000 - 900.000 VNĐ" }
                        ], total: "ước tính 750.000 VNĐ" },
                        { category: "Tham quan/Vui chơi", subItems: [
                            { name: "Vé tàu Cô Tô Con, lặn san hô, chèo kayak (tùy chọn)", price: "300.000 - 500.000 VNĐ" }
                        ], total: "ước tính 400.000 VNĐ" },
                        { category: "Phát sinh/Mua quà", subItems: [
                            { name: "Dự trù cho chi phí bất ngờ", price: "200.000 - 300.000 VNĐ" }
                        ], total: "ước tính 250.000 VNĐ" }
                    ]
                },
                itinerary: [
                    { day: 1, title: "Di chuyển & Khám phá trung tâm", plan: `
                        <p class="font-semibold text-gray-700">Sáng (06:00 - 11:30): Di chuyển đến Cô Tô</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>06:00 - 07:00:</strong> Tập trung tại nhà Linh (Từ Sơn). Thuê xe 16 chỗ riêng đến Cảng Ao Tiên (Vân Đồn).</li>
                            <li><strong>07:00 - 10:00:</strong> Di chuyển đến Cảng Ao Tiên.</li>
                            <li><strong>10:30 - 11:30:</strong> Lên tàu cao tốc từ Cảng Ao Tiên ra đảo Cô Tô (khoảng 60-100 phút).</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Đến Cô Tô, nhận phòng tại homestay/nhà nghỉ. Ăn trưa tại quán ăn địa phương.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (15:00 - 18:00): Khám phá trung tâm thị trấn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>15:00 - 17:00:</strong> Thuê xe điện/xe máy khám phá Con đường tình yêu, Tượng đài Bác Hồ.</li>
                            <li>Tắm biển tại Bãi tắm Tình Yêu gần trung tâm thị trấn.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn tối tại nhà hàng hải sản địa phương (Sơn Hải Quán, Sỉn Quán).</li>
                            <li>Tự do dạo biển, thưởng thức không khí về đêm.</li>
                        </ul>
                    ` },
                    { day: 2, title: "Thiên nhiên hoang sơ & Vui chơi biển", plan: `
                        <p class="font-semibold text-gray-700">Sáng (05:00 - 11:30): Đón bình minh & Khám phá Cô Tô Con</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>05:00 - 06:30:</strong> Đón bình minh tại Bãi đá Cầu Mỵ.</li>
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng tại quán ăn địa phương (quán Cồ Nghĩa).</li>
                            <li><strong>08:30 - 11:30:</strong> Di chuyển ra Đảo Cô Tô Con bằng tàu, tắm biển, lặn ngắm san hô hoặc chèo thuyền kayak.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa trên đảo Cô Tô Con hoặc mang theo đồ ăn nhẹ.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (14:30 - 18:00): Tắm biển & Ngắm hoàng hôn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>14:30 - 17:00:</strong> Quay về đảo lớn, di chuyển đến Bãi biển Vàn Chảy hoặc Hồng Vàn để tắm biển và chơi thể thao.</li>
                            <li><strong>17:00 - 18:00:</strong> Ngắm hoàng hôn tuyệt đẹp.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Tổ chức tiệc BBQ hải sản trên bãi biển.</li>
                            <li>Tham gia các hoạt động vui chơi buổi tối (đốt lửa trại, đàn hát, câu mực đêm - tùy chọn).</li>
                        </ul>
                    ` },
                    { day: 3, title: "Mua sắm & Trở về", plan: `
                        <p class="font-semibold text-gray-700">Sáng (07:00 - 12:00): Mua sắm & Trả phòng</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng.</li>
                            <li><strong>08:30 - 10:00:</strong> Mua sắm đặc sản Cô Tô tại chợ địa phương (mực khô, sá sùng).</li>
                            <li><strong>10:00 - 11:00:</strong> Trả phòng homestay/nhà nghỉ.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa tại Cô Tô.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (13:00 - 17:30): Trở về Từ Sơn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>13:00 - 14:00:</strong> Lên tàu cao tốc trở về Cảng Ao Tiên (Vân Đồn).</li>
                            <li><strong>14:30 - 17:30:</strong> Xe 16 chỗ đón nhóm tại Cảng Ao Tiên và di chuyển về Từ Sơn.</li>
                        </ul>
                    ` }
                ],
                lodging: [
                    { name: "Coto Family Homestay", desc: "Phù hợp nhóm đông, gần trung tâm.", price: "~350.000đ/phòng" },
                    { name: "Thủy Hoàng Homestay", desc: "Thiết kế độc đáo, sát bãi biển Hồng Vàn.", price: "~350.000đ/phòng" },
                    { name: "Homestay The Bkira Cô Tô", desc: "Giá rất phải chăng, tiết kiệm.", price: "~200.000đ/phòng" }
                ],
                food: [
                    { name: "Mực một nắng", desc: "Đặc sản nổi tiếng, thơm, dai, ngọt." },
                    { name: "Ốc móng tay", desc: "Hải sản tươi ngon, thịt chắc." },
                    { name: "Quán ăn Cồ Nghĩa", desc: "Chuyên đồ ăn sáng hải sản, giá bình dân." },
                    { name: "Tiệc BBQ bãi biển", desc: "Hoạt động gắn kết, chi phí hợp lý (~250k/người)." }
                ],
                photos: ["Bãi đá Cầu Mỵ", "Đảo Cô Tô Con", "Con đường tình yêu", "Bãi biển Vàn Chảy", "Ngọn hải đăng Cô Tô"],
                tips: [
                    "Đặt vé tàu xe và phòng ở sớm để có giá tốt.",
                    "Thuê xe điện theo ngày cho cả nhóm sẽ tiết kiệm và tiện lợi.",
                    "Tổ chức tiệc BBQ hoặc đặt set ăn theo nhóm để giảm chi phí ăn uống."
                ]
            },
            quanlan: {
                title: "Quan Lạn - 3 Ngày 2 Đêm",
                overview: {
                    intro: "Quan Lạn là hòn đảo hoang sơ, yên bình, nổi tiếng với các bãi cát trắng mịn trải dài. Đây là điểm đến lý tưởng cho những ai tìm kiếm sự thư thái, vẻ đẹp mộc mạc và đặc biệt phù hợp với ngân sách hạn chế.",
                    weather: "⚠️ **Rủi ro thời tiết cao:** Tương tự Cô Tô, cuối tháng 7 có nguy cơ bão. Cần có kế hoạch dự phòng cho việc di chuyển bằng tàu.",
                    highlights: ["Bãi biển Minh Châu đẹp nhất đảo", "Eo Gió hùng vĩ", "Check-in Đồi Vô Cực, Dòng sông đôi bờ cát trắng", "Văn hóa làng chài cổ kính"],
                    duration: "3 Ngày / 2 Đêm",
                    costRange: "1.750.000 - 2.850.000 VNĐ/người"
                },
                costs: {
                    labels: ["Di chuyển", "Lưu trú", "Ăn uống", "Tham quan", "Phát sinh"],
                    values: [600, 400, 750, 100, 250],
                    summary: "Quan Lạn là lựa chọn kinh tế nhất. Chi phí tiết kiệm hơn nhờ giá tàu xe, lưu trú và tham quan rẻ hơn. Hầu hết các điểm tham quan tự nhiên đều miễn phí.",
                    details: [
                        { category: "Di chuyển", subItems: [
                            { name: "Từ Từ Sơn đến Vân Đồn (xe 16 chỗ)", price: "240.000 - 290.000 VNĐ" },
                            { name: "Tàu cao tốc Vân Đồn - Quan Lạn (khứ hồi)", price: "200.000 - 500.000 VNĐ" },
                            { name: "Phí qua cảng Vân Đồn", price: "60.000 VNĐ" },
                            { name: "Di chuyển trên đảo (xe điện/tuk-tuk/xe máy)", price: "100.000 - 250.000 VNĐ" }
                        ], total: "ước tính 600.000 VNĐ" },
                        { category: "Lưu trú (2 đêm)", subItems: [
                            { name: "Nhà nghỉ/homestay bình dân", price: "300.000 - 500.000 VNĐ" }
                        ], total: "ước tính 400.000 VNĐ" },
                        { category: "Ăn uống (3 ngày)", subItems: [
                            { name: "Ăn tại quán địa phương, chợ, set menu/BBQ", price: "600.000 - 900.000 VNĐ" }
                        ], total: "ước tính 750.000 VNĐ" },
                        { category: "Tham quan/Vui chơi", subItems: [
                            { name: "Các điểm tham quan tự nhiên (miễn phí)", price: "50.000 - 150.000 VNĐ" }
                        ], total: "ước tính 100.000 VNĐ" },
                        { category: "Phát sinh/Mua quà", subItems: [
                            { name: "Dự trù cho chi phí bất ngờ", price: "200.000 - 300.000 VNĐ" }
                        ], total: "ước tính 250.000 VNĐ" }
                    ]
                },
                itinerary: [
                    { day: 1, title: "Di chuyển & Tắm biển", plan: `
                        <p class="font-semibold text-gray-700">Sáng (06:00 - 11:30): Di chuyển đến Quan Lạn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>06:00 - 07:00:</strong> Tập trung tại nhà Linh (Từ Sơn). Thuê xe 16 chỗ đến Cảng Ao Tiên (Vân Đồn).</li>
                            <li><strong>07:00 - 10:00:</strong> Di chuyển đến Cảng Ao Tiên.</li>
                            <li><strong>10:30 - 11:30:</strong> Lên tàu cao tốc từ Cảng Ao Tiên ra đảo Quan Lạn (khoảng 45-60 phút).</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Đến Quan Lạn, nhận phòng homestay/nhà nghỉ. Ăn trưa tại quán ăn địa phương.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (15:00 - 18:00): Tắm biển & Thư giãn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>15:00 - 17:00:</strong> Thuê xe điện/tuk-tuk đến Bãi biển Quan Lạn hoặc Sơn Hào để tắm biển.</li>
                            <li><strong>17:00 - 18:00:</strong> Ngắm hoàng hôn tại Bãi Sơn Hào hoặc Bãi Quan Lạn.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn tối tại nhà hàng hải sản địa phương (Hải Yến, Tuấn Tuyên Quán).</li>
                            <li>Tự do khám phá Quan Lạn về đêm.</li>
                        </ul>
                    ` },
                    { day: 2, title: "Khám phá cảnh đẹp & 'Sống ảo'", plan: `
                        <p class="font-semibold text-gray-700">Sáng (07:00 - 11:30): Khám phá các điểm check-in độc đáo</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng.</li>
                            <li><strong>08:30 - 11:30:</strong> Thuê xe điện/tuk-tuk khám phá: Eo Gió Quan Lạn, Đồi Vô Cực, Dòng sông đôi bờ cát trắng, Bãi cỏ châu Âu.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa tại khu vực Bãi Minh Châu.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (14:30 - 18:00): Tắm biển Minh Châu</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>14:30 - 17:00:</strong> Tắm biển tại Bãi biển Minh Châu.</li>
                            <li><strong>17:00 - 18:00:</strong> Thư giãn và ngắm cảnh.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn tối tại nhà hàng hoặc tự tổ chức tiệc BBQ hải sản.</li>
                            <li>Nếu có điều kiện, trải nghiệm câu mực đêm.</li>
                        </ul>
                    ` },
                    { day: 3, title: "Tham quan văn hóa & Trở về", plan: `
                        <p class="font-semibold text-gray-700">Sáng (07:00 - 12:00): Tham quan văn hóa & Mua sắm</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng.</li>
                            <li><strong>08:30 - 10:00:</strong> Tham quan Đình Quan Lạn hoặc Miếu thờ Trần Khánh Dư.</li>
                            <li><strong>10:00 - 11:00:</strong> Mua sắm hải sản và đặc sản tại Chợ trung tâm Quan Lạn.</li>
                            <li><strong>11:00 - 12:00:</strong> Trả phòng homestay/nhà nghỉ.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa tại Quan Lạn.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (13:00 - 17:30): Trở về Từ Sơn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>13:00 - 14:00:</strong> Lên tàu cao tốc trở về Cảng Ao Tiên (Vân Đồn).</li>
                            <li><strong>14:30 - 17:30:</strong> Xe 16 chỗ đón nhóm tại Cảng Ao Tiên và di chuyển về Từ Sơn.</li>
                        </ul>
                    ` }
                ],
                lodging: [
                    { name: "Villa Hoa Giấy", desc: "Có phòng tập thể, sân vườn rộng.", price: "200k-500k/phòng" },
                    { name: "Nhà nghỉ Anh Bùi", desc: "Giá siêu rẻ, phù hợp cho nhóm phượt.", price: "120k-220k/phòng" },
                    { name: "Link Homestay Quan Lạn", desc: "Vị trí trung tâm, có cho thuê xe.", price: "200k-250k/đêm" }
                ],
                food: [
                    { name: "Sá sùng", desc: "Đặc sản số 1 của Quan Lạn, rất quý." },
                    { name: "Tu hài (ốc vòi voi)", desc: "Thịt giòn dai, thơm ngon." },
                    { name: "Chân Tiên Quán", desc: "Giá cả bình dân, không gian sôi động." },
                    { name: "Đi chợ sớm", desc: "Mua hải sản tươi ngon với giá tốt." }
                ],
                photos: ["Bãi biển Minh Châu", "Eo Gió Quan Lạn", "Đồi Vô Cực", "Dòng sông đôi bờ cát trắng", "Bãi cỏ châu Âu"],
                tips: [
                    "Thuê xe tuk-tuk chung cho cả nhóm để tiết kiệm chi phí đi lại.",
                    "Tự mua hải sản ở chợ và nhờ homestay chế biến sẽ rẻ hơn ăn nhà hàng.",
                    "Tận dụng các điểm tham quan tự nhiên miễn phí."
                ]
            },
            quangbinh: {
                title: "Quảng Bình - 4 Ngày 3 Đêm",
                overview: {
                    intro: "Quảng Bình là điểm đến đa dạng với hệ thống hang động kỳ vĩ, bãi biển tuyệt đẹp và các hoạt động mạo hiểm. Lựa chọn này phù hợp cho nhóm muốn khám phá, chấp nhận di chuyển xa và thời tiết nắng nóng.",
                    weather: "☀️ **Rủi ro thời tiết thấp:** Cuối tháng 7 là mùa khô, trời nắng nóng gay gắt (36-40°C), ít nguy cơ bão. Lý tưởng cho các hoạt động dưới nước nhưng cần chuẩn bị chống nắng kỹ.",
                    highlights: ["Khám phá hang động di sản (Phong Nha, Thiên Đường)", "Zipline, tắm bùn tại Sông Chày - Hang Tối", "Trượt cát tại Đồi Cát Quang Phú", "Tắm biển Nhật Lệ"],
                    duration: "4 Ngày / 3 Đêm",
                    costRange: "3.000.000 - 4.642.000 VNĐ/người"
                },
                costs: {
                    labels: ["Di chuyển", "Lưu trú", "Ăn uống", "Tham quan", "Phát sinh"],
                    values: [1000, 900, 1000, 1150, 400],
                    summary: "Chi phí cao hơn do thời gian đi dài hơn và vé tham quan hang động khá tốn kém. Có thể tối ưu bằng cách đi xe khách giường nằm và chọn các gói tour tham quan hợp lý.",
                    details: [
                        { category: "Di chuyển", subItems: [
                            { name: "Từ Từ Sơn đến Hà Nội (xe 16 chỗ)", price: "35.000 - 42.000 VNĐ" },
                            { name: "Hà Nội - Đồng Hới (xe khách giường nằm khứ hồi)", price: "500.000 - 700.000 VNĐ" },
                            { name: "Di chuyển trên địa bàn Quảng Bình (thuê xe 16 chỗ/xe máy)", price: "300.000 - 500.000 VNĐ" }
                        ], total: "ước tính 1.000.000 VNĐ" },
                        { category: "Lưu trú (3 đêm)", subItems: [
                            { name: "Homestay/Nhà nghỉ có phòng tập thể", price: "750.000 - 1.200.000 VNĐ" }
                        ], total: "ước tính 900.000 VNĐ" },
                        { category: "Ăn uống (4 ngày)", subItems: [
                            { name: "Ăn tại quán địa phương, chợ, set menu", price: "800.000 - 1.200.000 VNĐ" }
                        ], total: "ước tính 1.000.000 VNĐ" },
                        { category: "Tham quan/Vui chơi", subItems: [
                            { name: "Vé tham quan hang động (Phong Nha, Thiên Đường), Sông Chày - Hang Tối", price: "800.000 - 1.500.000 VNĐ" }
                        ], total: "ước tính 1.150.000 VNĐ" },
                        { category: "Phát sinh/Mua quà", subItems: [
                            { name: "Dự trù cho chi phí bất ngờ", price: "300.000 - 500.000 VNĐ" }
                        ], total: "ước tính 400.000 VNĐ" }
                    ]
                },
                itinerary: [
                    { day: 1, title: "Di chuyển đến Đồng Hới", plan: `
                        <p class="font-semibold text-gray-700">Chiều (16:00 - 21:00): Di chuyển đến Hà Nội & Lên xe/tàu đi Quảng Bình</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>16:00 - 17:00:</strong> Tập trung tại nhà Linh (Từ Sơn). Thuê xe 16 chỗ đến bến xe hoặc ga tàu Hà Nội.</li>
                            <li><strong>18:00 - 21:00:</strong> Lên xe khách giường nằm hoặc tàu hỏa từ Hà Nội đi Đồng Hới.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Nghỉ đêm trên xe/tàu.</li>
                        </ul>
                    ` },
                    { day: 2, title: "Khám phá Đồng Hới & Hoạt động biển", plan: `
                        <p class="font-semibold text-gray-700">Sáng (06:00 - 11:30): Đến Đồng Hới & Tắm biển Nhật Lệ</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>06:00 - 07:00:</strong> Đến Đồng Hới, nhận phòng homestay/nhà nghỉ.</li>
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng với đặc sản cháo canh Quảng Bình.</li>
                            <li><strong>08:30 - 11:30:</strong> Tắm biển Nhật Lệ.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa tại nhà hàng hải sản ven biển Nhật Lệ.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (14:30 - 18:00): Khám phá Đồi Cát Quang Phú</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>14:30 - 17:30:</strong> Di chuyển đến Đồi Cát Quang Phú, trải nghiệm trượt cát.</li>
                            <li><strong>17:30 - 18:00:</strong> Ngắm hoàng hôn trên đồi cát.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn tối tại Đồng Hới, thưởng thức các món ăn vặt địa phương.</li>
                            <li>Dạo chơi thành phố Đồng Hới về đêm.</li>
                        </ul>
                    ` },
                    { day: 3, title: "Vườn Quốc gia Phong Nha - Kẻ Bàng", plan: `
                        <p class="font-semibold text-gray-700">Sáng (07:00 - 12:00): Khám phá Động Phong Nha</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng.</li>
                            <li><strong>08:30 - 12:00:</strong> Di chuyển đến Phong Nha - Kẻ Bàng. Khám phá Động Phong Nha bằng thuyền trên sông ngầm.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa tại khu vực Phong Nha.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (14:00 - 17:30): Trải nghiệm Sông Chày - Hang Tối</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>14:00 - 17:30:</strong> Trải nghiệm các hoạt động tại Sông Chày - Hang Tối (zipline, tắm bùn, chèo kayak).</li>
                            <li><em>Hoặc lựa chọn thay thế:</em> Ghé Suối Nước Moọc.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Tối:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn tối tại Phong Nha, thưởng thức đặc sản gà đồi nướng muối cheo.</li>
                            <li>Nghỉ đêm tại Phong Nha.</li>
                        </ul>
                    ` },
                    { day: 4, title: "Hang động & Trở về", plan: `
                        <p class="font-semibold text-gray-700">Sáng (07:00 - 11:30): Khám phá Động Thiên Đường hoặc các điểm khác</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>07:00 - 08:00:</strong> Ăn sáng.</li>
                            <li><strong>08:30 - 11:30:</strong> Tham quan Động Thiên Đường.</li>
                            <li><em>Hoặc lựa chọn thay thế:</em> Ghé Bãi Đá Nhảy hoặc Vũng Chùa – Đảo Yến.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Trưa:</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ăn trưa tại Đồng Hới.</li>
                        </ul>
                        <p class="font-semibold text-gray-700 mt-2">Chiều (14:00 - 21:00): Mua sắm & Trở về Từ Sơn</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>14:00 - 15:00:</strong> Mua sắm đặc sản Quảng Bình tại chợ hoặc cửa hàng địa phương.</li>
                            <li><strong>15:00 - 16:00:</strong> Di chuyển ra bến xe/ga tàu Đồng Hới.</li>
                            <li><strong>16:30 - 21:00:</strong> Lên xe khách giường nằm hoặc tàu hỏa trở về Hà Nội.</li>
                            <li>Xe 16 chỗ đã đặt sẽ đón nhóm tại Hà Nội và di chuyển về Từ Sơn.</li>
                        </ul>
                    ` }
                ],
                lodging: [
                    { name: "Nhà nghỉ Biển Vàng", desc: "Ở Đồng Hới, gần biển, giá rẻ.", price: "250k-400k/đêm" },
                    { name: "An An Homestay", desc: "Ở Phong Nha, giá hợp túi tiền.", price: "100k-600k/đêm" },
                    { name: "Tropical Valley Homestay", desc: "Ở Phong Nha, có phòng tập thể, không gian xanh.", price: "Phù hợp nhóm đông" }
                ],
                food: [
                    { name: "Cháo canh Quảng Bình", desc: "Món ăn sáng đặc trưng, đậm đà." },
                    { name: "Bánh bột lọc", desc: "Món ăn vặt nổi tiếng, thơm ngon." },
                    { name: "Gà nướng muối cheo", desc: "Đặc sản vùng Phong Nha, thịt săn chắc." },
                    { name: "Quán ăn vặt Mệ Xuân", desc: "Nơi thưởng thức các loại bánh địa phương." }
                ],
                photos: ["Động Thiên Đường", "Động Phong Nha", "Suối Nước Moọc", "Sông Chày - Hang Tối", "Đồi Cát Quang Phú", "Bãi Đá Nhảy"],
                tips: [
                    "Chọn xe khách giường nằm để tiết kiệm chi phí di chuyển đường dài.",
                    "Thuê xe 16 chỗ theo ngày cho cả nhóm để đi từ Đồng Hới đến Phong Nha.",
                    "Chọn tour trọn gói (Sông Chày - Hang Tối) để trải nghiệm nhiều hoạt động với một vé."
                ]
            },
        };

        // New data for comparison tab
        const comparisonData = {
            headers: ["Tiêu chí", "Cô Tô (3N2Đ)", "Quan Lạn (3N2Đ)", "Quảng Bình (4N3Đ)"],
            rows: [
                {
                    label: "Rủi ro thời tiết (cuối tháng 7)",
                    coto: "Cao (bão, áp thấp nhiệt đới)",
                    quanlan: "Cao (bão, áp thấp nhiệt đới)",
                    quangbinh: "Thấp (nắng nóng gay gắt, ít bão)"
                },
                {
                    label: "Tổng chi phí ước tính/người",
                    coto: "2.510.000 - 3.550.000 VNĐ",
                    quanlan: "1.750.000 - 2.850.000 VNĐ",
                    quangbinh: "3.000.000 - 4.642.000 VNĐ"
                },
                {
                    label: "Trải nghiệm chính",
                    coto: "Biển đảo hoang sơ, lặn ngắm san hô, vui chơi trên biển, khám phá đảo nhỏ.",
                    quanlan: "Biển đảo yên bình, cảnh quan độc đáo (Eo Gió, Đồi Vô Cực), văn hóa làng chài.",
                    quangbinh: "Khám phá hang động kỳ vĩ, hoạt động mạo hiểm dưới nước, biển đẹp, đồi cát."
                },
                {
                    label: "Cơ hội chụp ảnh",
                    coto: "Rất nhiều điểm đẹp: Bãi đá Cầu Mỵ, Cô Tô Con, Con đường tình yêu, Hải đăng.",
                    quanlan: "Nhiều điểm đẹp: Eo Gió, Đồi Vô Cực, Dòng sông đôi bờ cát trắng, Bãi cỏ châu Âu.",
                    quangbinh: "Đa dạng: Hang động tráng lệ, đồi cát độc đáo, biển thơ mộng, sông suối xanh mát."
                },
                {
                    label: "Thời gian di chuyển (từ Từ Sơn)",
                    coto: "Trung bình (cần xe riêng đến cảng, tàu cao tốc)",
                    quanlan: "Trung bình (cần xe riêng đến cảng, tàu cao tốc nhanh hơn)",
                    quangbinh: "Dài (xe khách/tàu hỏa qua đêm), có thể mệt mỏi hơn."
                },
                {
                    label: "Phù hợp nhóm",
                    coto: "Phù hợp nếu có kế hoạch dự phòng thời tiết và quản lý chi phí tốt.",
                    quanlan: "Rất phù hợp với ngân sách tiết kiệm và yêu thích khám phá hoang sơ.",
                    quangbinh: "Phù hợp nếu chấp nhận di chuyển dài và nắng nóng, ưu tiên khám phá mạo hiểm."
                }
            ]
        };

        const mainContent = document.getElementById('main-content');
        const mainNavButtons = document.querySelectorAll('#main-nav button');
        let costChart;

        const generateDetailedCostTable = (details) => {
            let tableHtml = `
                <div class="overflow-x-auto">
                <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">Hạng mục chi phí</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">Chi tiết & Giá ước tính/người</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            details.forEach(item => {
                tableHtml += `
                    <tr class="border-b border-gray-200">
                        <td class="py-3 px-4 align-top">
                            <strong class="text-teal-700">${item.category}</strong><br>
                            <span class="text-sm text-gray-500">${item.total ? `(${item.total})` : ''}</span>
                        </td>
                        <td class="py-3 px-4">
                            <ul class="list-none space-y-1">
                                ${item.subItems.map(sub => `
                                    <li class="text-sm text-gray-700">
                                        <span class="text-gray-600">${sub.name}:</span> <span class="font-medium text-teal-600">${sub.price}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </td>
                    </tr>
                `;
            });
            tableHtml += `
                    </tbody>
                </table>
                </div>
            `;
            return tableHtml;
        };

        const generateComparisonTable = (data) => {
            let tableHtml = `
                <h3 class="text-xl font-semibold mb-4 text-center text-teal-700">Tổng kết & So sánh các lựa chọn</h3>
                <p class="text-gray-600 mb-6 text-center max-w-2xl mx-auto">Bảng so sánh này giúp bạn dễ dàng đối chiếu các tiêu chí quan trọng giữa Cô Tô, Quan Lạn và Quảng Bình để đưa ra quyết định phù hợp nhất cho chuyến đi của nhóm.</p>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                        <thead class="bg-gray-100">
                            <tr>
                                ${data.headers.map(header => `<th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">${header}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${data.rows.map(row => `
                                <tr class="border-b border-gray-200">
                                    <td class="py-3 px-4 font-medium text-teal-700">${row.label}</td>
                                    <td class="py-3 px-4 text-gray-700">${row.coto}</td>
                                    <td class="py-3 px-4 text-gray-700">${row.quanlan}</td>
                                    <td class="py-3 px-4 text-gray-700">${row.quangbinh}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            return tableHtml;
        };

        const generateHTML = (destKey) => {
            if (destKey === 'comparison') {
                return `
                    <div id="comparison-content" class="destination-content">
                        ${generateComparisonTable(comparisonData)}
                    </div>
                `;
            }

            const data = tripData[destKey];
            return `
                <div id="${destKey}-content" class="destination-content">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">${data.title}</h2>
                    
                    <div class="border-b border-gray-200 mb-6">
                        <nav id="${destKey}-tabs" class="flex flex-wrap -mb-px justify-center gap-x-6 gap-y-2">
                            <button data-tab="overview" class="tab-button text-gray-500 hover:text-teal-600 py-3 px-1 text-sm md:text-base active">Tổng Quan</button>
                            <button data-tab="costs" class="tab-button text-gray-500 hover:text-teal-600 py-3 px-1 text-sm md:text-base">Chi Phí</button>
                            <button data-tab="itinerary" class="tab-button text-gray-500 hover:text-teal-600 py-3 px-1 text-sm md:text-base">Lịch Trình</button>
                            <button data-tab="lodgingfood" class="tab-button text-gray-500 hover:text-teal-600 py-3 px-1 text-sm md:text-base">Ăn & Ở</button>
                            <button data-tab="photos" class="tab-button text-gray-500 hover:text-teal-600 py-3 px-1 text-sm md:text-base">Chụp Ảnh</button>
                            <button data-tab="tips" class="tab-button text-gray-500 hover:text-teal-600 py-3 px-1 text-sm md:text-base">Mẹo Vặt</button>
                        </nav>
                    </div>

                    <div id="${destKey}-panes">
                        <div data-tab="overview" class="content-pane active">
                            <div class="space-y-4 text-gray-700">
                                <p class="text-lg">${data.overview.intro}</p>
                                <div class="p-4 bg-amber-50 border-l-4 border-amber-400 rounded-r-lg">
                                    <p>${data.overview.weather}</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-center">
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-teal-700 mb-2">Điểm Nhấn Chính</h4>
                                        <ul class="list-none space-y-1">${data.overview.highlights.map(h => `<li>✨ ${h}</li>`).join('')}</ul>
                                    </div>
                                    <div class="bg-gray-50 p-4 rounded-lg flex flex-col justify-center">
                                        <h4 class="font-semibold text-teal-700">Thời gian</h4>
                                        <p class="text-2xl font-bold">${data.overview.duration}</p>
                                        <h4 class="font-semibold text-teal-700 mt-4">Chi phí dự kiến</h4>
                                        <p class="text-2xl font-bold">${data.overview.costRange}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div data-tab="costs" class="content-pane">
                             <div class="text-center mb-6">
                                <h3 class="text-xl font-semibold">Phân Tích Chi Phí Dự Kiến (Đơn vị: 1.000 VNĐ)</h3>
                                <p class="text-gray-600 mt-1">${data.costs.summary}</p>
                            </div>
                            <div class="chart-container mb-8">
                                <canvas id="costChart"></canvas>
                            </div>
                            ${generateDetailedCostTable(data.costs.details)}
                        </div>

                        <div data-tab="itinerary" class="content-pane">
                            <div class="relative space-y-8">
                                ${data.itinerary.map(item => `
                                <div class="timeline-item relative">
                                    <div class="timeline-dot bg-teal-500 border-4 border-white rounded-full"></div>
                                    <h4 class="font-bold text-lg text-teal-700">Ngày ${item.day}: ${item.title}</h4>
                                    <div class="text-gray-600">${item.plan}</div>
                                </div>`).join('')}
                            </div>
                        </div>

                        <div data-tab="lodgingfood" class="content-pane">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <h3 class="text-xl font-semibold mb-4 text-teal-700">🏨 Gợi Ý Lưu Trú</h3>
                                    <div class="space-y-4">
                                        ${data.lodging.map(l => `
                                        <div class="p-4 bg-gray-50 rounded-lg">
                                            <h5 class="font-semibold">${l.name}</h5>
                                            <p class="text-sm text-gray-600">${l.desc}</p>
                                            <p class="text-sm font-medium text-teal-600 mt-1">${l.price}</p>
                                        </div>`).join('')}
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-semibold mb-4 text-teal-700">🍜 Gợi Ý Ăn Uống</h3>
                                    <div class="space-y-4">
                                        ${data.food.map(f => `
                                        <div class="p-4 bg-gray-50 rounded-lg">
                                            <h5 class="font-semibold">${f.name}</h5>
                                            <p class="text-sm text-gray-600">${f.desc}</p>
                                        </div>`).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div data-tab="photos" class="content-pane">
                            <h3 class="text-xl font-semibold mb-4 text-center text-teal-700">📸 Góc 'Sống Ảo' Không Thể Bỏ Lỡ</h3>
                             <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
                                ${data.photos.map(p => `
                                <div class="p-4 bg-teal-50 text-teal-800 rounded-lg text-center font-medium shadow-sm">
                                    ${p}
                                </div>`).join('')}
                            </div>
                        </div>
                        
                        <div data-tab="tips" class="content-pane">
                             <h3 class="text-xl font-semibold mb-4 text-center text-teal-700">💡 Mẹo Tiết Kiệm Chi Phí</h3>
                             <ul class="list-none space-y-3 max-w-2xl mx-auto">
                                ${data.tips.map(t => `<li class="p-3 bg-gray-50 rounded-lg flex items-start"><span class="text-teal-500 mr-3 mt-1">💰</span><span>${t}</span></li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        };

        const setupTabs = (destKey) => {
            const tabButtons = document.querySelectorAll(`#${destKey}-tabs button`);
            const contentPanes = document.querySelectorAll(`#${destKey}-panes .content-pane`);

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabName = button.dataset.tab;

                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    contentPanes.forEach(pane => {
                        if (pane.dataset.tab === tabName) {
                            pane.classList.add('active');
                        } else {
                            pane.classList.remove('active');
                        }
                    });

                    if (tabName === 'costs') {
                        updateChart(destKey);
                    }
                });
            });
        };

        const updateChart = (destKey) => {
            const data = tripData[destKey].costs;
            if (costChart) {
                costChart.destroy();
            }
            const ctx = document.getElementById('costChart').getContext('2d');
            if (ctx) { // Ensure canvas element exists before trying to get context
                costChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Chi phí (x1000 VNĐ)',
                            data: data.values,
                            backgroundColor: [
                                'rgba(13, 148, 136, 0.6)',
                                'rgba(15, 118, 110, 0.6)',
                                'rgba(17, 94, 89, 0.6)',
                                'rgba(12, 74, 75, 0.6)',
                                'rgba(6, 78, 59, 0.6)'
                            ],
                            borderColor: [
                                'rgb(13, 148, 136)',
                                'rgb(15, 118, 110)',
                                'rgb(17, 94, 89)',
                                'rgb(12, 74, 75)',
                                'rgb(6, 78, 59)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }
        };

        const showDestination = (destKey) => {
            mainContent.innerHTML = generateHTML(destKey);
            mainNavButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.dest === destKey);
            });
            if (destKey !== 'comparison') {
                setupTabs(destKey);
            }
            // For the comparison tab, no sub-tabs to set up, and no chart to update immediately.
        };

        mainNavButtons.forEach(button => {
            button.addEventListener('click', () => {
                const destKey = button.dataset.dest;
                showDestination(destKey);
            });
        });

        // Initial load
        showDestination('coto');
    </script>
</body>
</html>
