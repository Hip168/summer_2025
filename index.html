<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CÃ´ng Cá»¥ Láº­p Káº¿ Hoáº¡ch Chuyáº¿n Äi Cho Sinh ViÃªn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Muted Greens -->
    <!-- Application Structure Plan: Dashboard-style approach. The top-level view is a comparative dashboard with key metrics (cost, duration, risk) for quick decision-making. Clicking on a destination drills down into a detailed, tabbed view for that specific option (Itinerary, Cost, Lodging, Notes). This structure transforms the linear report into a non-linear, user-driven exploration tool, allowing users to compare at a high level and then dive deep into areas of interest without getting lost in a wall of text. It directly supports the user's primary task: choosing the best trip. -->
    <!-- Visualization & Content Choices: 
        - Main Comparison (Cost): Report Info: Total estimated costs for 3 trips. Goal: Compare. Viz: Bar Chart (Chart.js/Canvas) for minimum cost. Interaction: Tooltips on hover show exact cost range. Justification: A bar chart is the most effective way to visually compare discrete values across different categories.
        - Risk Level: Report Info: Weather warnings for islands. Goal: Inform/Warn. Viz: Line chart (Chart.js/Canvas) on secondary axis and HTML/Tailwind with icon (e.g., âš ï¸) and text color (red for high risk). Interaction: Tooltips on hover. Justification: Provides an immediate, scannable visual warning, a critical decision factor from the report.
        - Cost Breakdown: Report Info: Cost categories for each trip. Goal: Inform. Viz: Donut Chart (Chart.js/Canvas). Interaction: Tooltips on hover. Justification: Effectively shows the proportion of each spending category relative to the total budget for a single trip.
        - Itinerary: Report Info: Day-by-day schedule. Goal: Organize/Inform. Viz: Simple List/Text (HTML/CSS). Interaction: None needed. Justification: Presents detailed itinerary directly without hiding, as requested by the user.
        - Detailed Comparison Table: Report Info: Duration, full cost range, key highlights for each trip. Goal: Compare/Inform. Viz: HTML Table with Tailwind styling. Interaction: None needed. Justification: Complements the chart by providing precise textual details that are hard to convey in a chart, enhancing the overall comparison.
        - Voting Section: Report Info: User preference for destination. Goal: Engage/Collect Preference. Viz: HTML cards with text display for votes and interactive buttons. Interaction: Click button to cast a vote, requires name input and checks for single vote per name using localStorage. Justification: Provides a direct interactive element for users to express their preference, adding a fun and engaging aspect to the comparison, with persistence. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #F8F7F4;
            color: #3D3D3D;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
        }
        .nav-button.active {
            border-bottom-color: #2F6C6D;
            color: #2F6C6D;
            font-weight: 600;
        }
        /* Message Box Styles */
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .message-box {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
        }
        .message-box-title {
            font-weight: bold;
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: #2F6C6D;
        }
        .message-box-content {
            margin-bottom: 1.5rem;
            color: #3D3D3D;
        }
        .message-box-close {
            background: #2F6C6D;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .message-box-close:hover {
            background: #4A8D8E;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-[#2F6C6D] mb-2">Káº¿ Hoáº¡ch Du Lá»‹ch HÃ¨ Cho Sinh ViÃªn</h1>
            <p class="text-base md:text-lg text-gray-600">CÃ´ng cá»¥ so sÃ¡nh vÃ  lá»±a chá»n chuyáº¿n Ä‘i hoÃ n háº£o cho nhÃ³m báº¡n!</p>
        </header>

        <main>
            <section id="comparison" class="mb-10 p-6 bg-white rounded-2xl shadow-lg">
                <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">So SÃ¡nh Tá»•ng Quan Chi PhÃ­ & Rá»§i Ro</h2>
                <p class="text-center mb-6 text-gray-600">Biá»ƒu Ä‘á»“ dÆ°á»›i Ä‘Ã¢y so sÃ¡nh tá»•ng chi phÃ­ Æ°á»›c tÃ­nh tá»‘i thiá»ƒu vÃ  má»©c Ä‘á»™ rá»§i ro thá»i tiáº¿t. Báº¡n cÃ³ thá»ƒ xem chi tiáº¿t hÆ¡n trong báº£ng bÃªn dÆ°á»›i.</p>
                <div class="chart-container h-64 md:h-80">
                    <canvas id="costComparisonChart"></canvas>
                </div>
                 <div class="mt-8">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Báº£ng so sÃ¡nh chi tiáº¿t</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                    <th class="py-3 px-6 text-left">Äiá»ƒm Ä‘áº¿n</th>
                                    <th class="py-3 px-6 text-left">Thá»i gian</th>
                                    <th class="py-3 px-6 text-left">Chi phÃ­/ngÆ°á»i (Æ°á»›c tÃ­nh)</th>
                                    <th class="py-3 px-6 text-left">Rá»§i ro thá»i tiáº¿t (thÃ¡ng 7)</th>
                                    <th class="py-3 px-6 text-left">Äiá»ƒm ná»•i báº­t</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-600 text-sm font-light">
                                <tr class="border-b border-gray-200 hover:bg-gray-50">
                                    <td class="py-3 px-6 text-left whitespace-nowrap">CÃ´ TÃ´</td>
                                    <td class="py-3 px-6 text-left">3 NgÃ y 2 ÄÃªm</td>
                                    <td class="py-3 px-6 text-left">2.3 - 3.4 triá»‡u VNÄ</td>
                                    <td class="py-3 px-6 text-left text-red-600 font-semibold">CAO âš ï¸</td>
                                    <td class="py-3 px-6 text-left">Biá»ƒn Ä‘áº¹p (VÃ n Cháº£y, Há»“ng VÃ n), BÃ£i Ä‘Ã¡ Cáº§u Má»µ, BBQ háº£i sáº£n, CÃ´ TÃ´ Con.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-gray-50">
                                    <td class="py-3 px-6 text-left whitespace-nowrap">Quan Láº¡n</td>
                                    <td class="py-3 px-6 text-left">3 NgÃ y 2 ÄÃªm</td>
                                    <td class="py-3 px-6 text-left">2.1 - 3.2 triá»‡u VNÄ</td>
                                    <td class="py-3 px-6 text-left text-red-600 font-semibold">CAO âš ï¸</td>
                                    <td class="py-3 px-6 text-left">Eo GiÃ³, BÃ£i Minh ChÃ¢u, ÄÃ¬nh Quan Láº¡n, DÃ²ng sÃ´ng Ä‘Ã´i bá» cÃ¡t tráº¯ng, chi phÃ­ tÃ u tháº¥p hÆ¡n.</td>
                                </tr>
                                <tr class="border-b border-gray-200 hover:bg-gray-50">
                                    <td class="py-3 px-6 text-left whitespace-nowrap">Quáº£ng BÃ¬nh</td>
                                    <td class="py-3 px-6 text-left">4 NgÃ y 3 ÄÃªm</td>
                                    <td class="py-3 px-6 text-left">3.0 - 4.5 triá»‡u VNÄ</td>
                                    <td class="py-3 px-6 text-left text-amber-600 font-semibold">TRUNG BÃŒNH â˜€ï¸</td>
                                    <td class="py-3 px-6 text-left">Hang Ä‘á»™ng (Phong Nha/ThiÃªn ÄÆ°á»ng), Zipline, Kayak, Äá»“i CÃ¡t Quang PhÃº, áº©m thá»±c Ä‘a dáº¡ng.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="mt-10 text-center">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">BÃ¬nh chá»n Ä‘iá»ƒm Ä‘áº¿n yÃªu thÃ­ch cá»§a báº¡n!</h3>
                    <div class="mb-4">
                        <label for="voterName" class="block text-gray-700 text-sm font-bold mb-2">TÃªn cá»§a báº¡n:</label>
                        <input type="text" id="voterName" class="shadow appearance-none border rounded-lg w-full max-w-xs py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Nháº­p tÃªn cá»§a báº¡n">
                    </div>
                    <div class="flex flex-wrap justify-center gap-4">
                        <div class="bg-gray-50 p-4 rounded-xl shadow-sm w-48 flex flex-col items-center">
                            <p class="text-lg font-semibold text-gray-800">CÃ´ TÃ´</p>
                            <p class="text-sm text-gray-600 mt-1 mb-3">Sá»‘ lÆ°á»£t bÃ¬nh chá»n: <span id="votes-coto" class="font-bold text-[#2F6C6D]">0</span></p>
                            <button class="vote-button bg-[#2F6C6D] hover:bg-[#4A8D8E] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-trip-vote="coto">BÃ¬nh chá»n</button>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl shadow-sm w-48 flex flex-col items-center">
                            <p class="text-lg font-semibold text-gray-800">Quan Láº¡n</p>
                            <p class="text-sm text-gray-600 mt-1 mb-3">Sá»‘ lÆ°á»£t bÃ¬nh chá»n: <span id="votes-quanlan" class="font-bold text-[#2F6C6D]">0</span></p>
                            <button class="vote-button bg-[#2F6C6D] hover:bg-[#4A8D8E] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-trip-vote="quanlan">BÃ¬nh chá»n</button>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-xl shadow-sm w-48 flex flex-col items-center">
                            <p class="text-lg font-semibold text-gray-800">Quáº£ng BÃ¬nh</p>
                            <p class="text-sm text-gray-600 mt-1 mb-3">Sá»‘ lÆ°á»£t bÃ¬nh chá»n: <span id="votes-quangbinh" class="font-bold text-[#2F6C6D]">0</span></p>
                            <button class="vote-button bg-[#2F6C6D] hover:bg-[#4A8D8E] text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200" data-trip-vote="quangbinh">BÃ¬nh chá»n</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="trip-details" class="bg-white rounded-2xl shadow-lg p-4 sm:p-6">
                <nav class="flex justify-center border-b border-gray-200 mb-6">
                    <button class="nav-button py-4 px-6 text-lg" data-trip="coto">CÃ´ TÃ´</button>
                    <button class="nav-button py-4 px-6 text-lg" data-trip="quanlan">Quan Láº¡n</button>
                    <button class="nav-button py-4 px-6 text-lg" data-trip="quangbinh">Quáº£ng BÃ¬nh</button>
                </nav>

                <div id="trip-content">
                </div>
            </section>
            
            <footer class="text-center mt-8 text-sm text-gray-500">
                <p>ChÃºc cÃ¡c báº¡n cÃ³ má»™t chuyáº¿n Ä‘i thanh xuÃ¢n tháº­t Ä‘Ã¡ng nhá»› vÃ  an toÃ n!</p>
                <p>Dá»¯ liá»‡u Ä‘Æ°á»£c tá»•ng há»£p vÃ  phÃ¢n tÃ­ch tá»« bÃ¡o cÃ¡o káº¿ hoáº¡ch ban Ä‘áº§u.</p>
            </footer>
        </main>
    </div>

    <!-- Custom Message Box HTML -->
    <div id="messageBoxOverlay" class="message-box-overlay hidden">
        <div class="message-box">
            <h3 id="messageBoxTitle" class="message-box-title"></h3>
            <p id="messageBoxContent" class="message-box-content"></p>
            <button id="messageBoxClose" class="message-box-close">ÄÃ³ng</button>
        </div>
    </div>

    <template id="tripTemplate">
        <div class="trip-info p-2" data-trip-id="">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-center">
                <div class="bg-gray-50 p-4 rounded-xl">
                    <h3 class="font-bold text-lg text-gray-700">Thá»i gian</h3>
                    <p class="text-xl text-[#2F6C6D] font-semibold" data-field="duration"></p>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl">
                    <h3 class="font-bold text-lg text-gray-700">Chi phÃ­ / ngÆ°á»i</h3>
                    <p class="text-xl text-[#2F6C6D] font-semibold" data-field="cost"></p>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl">
                    <h3 class="font-bold text-lg text-gray-700">Rá»§i ro thá»i tiáº¿t</h3>
                    <p class="text-xl font-semibold" data-field="risk"></p>
                </div>
            </div>

            <div class="text-base text-gray-700 mb-8 leading-relaxed" data-field="intro"></div>
            
            <div class="space-y-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-[#2F6C6D]">ğŸ“… Lá»‹ch trÃ¬nh chi tiáº¿t</h3>
                    <div class="space-y-4" data-field="itinerary"></div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold mb-4 text-[#2F6C6D]">ğŸ’° PhÃ¢n tÃ­ch chi phÃ­</h3>
                    <p class="text-center mb-4 text-gray-600">Biá»ƒu Ä‘á»“ dÆ°á»›i Ä‘Ã¢y thá»ƒ hiá»‡n tá»· lá»‡ phÃ¢n bá»• chi phÃ­ cho cÃ¡c háº¡ng má»¥c chÃ­nh trong chuyáº¿n Ä‘i.</p>
                    <div class="chart-container h-80 md:h-96">
                        <canvas data-field="costChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold mb-4 text-[#2F6C6D]">ğŸ¡ Gá»£i Ã½ Chá»— á»Ÿ & Ä‚n uá»‘ng</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-field="lodgingFood"></div>
                </div>
            </div>

        </div>
    </template>

    <script>
        const tripData = {
            coto: {
                name: "CÃ´ TÃ´",
                duration: "3 NgÃ y 2 ÄÃªm",
                cost: "2.3 - 3.4 triá»‡u",
                minCostForChart: 2.32,
                maxCostForChart: 3.41,
                risk: "<span class='text-red-600'>CAO âš ï¸</span>",
                riskLevelForChart: 3,
                highlight: "Biá»ƒn Ä‘áº¹p (VÃ n Cháº£y, Há»“ng VÃ n), BÃ£i Ä‘Ã¡ Cáº§u Má»µ, BBQ háº£i sáº£n, CÃ´ TÃ´ Con.",
                votes: 0,
                intro: "Lá»±a chá»n CÃ´ TÃ´ mang Ä‘áº¿n tráº£i nghiá»‡m khÃ¡m phÃ¡ Ä‘áº£o ngá»c hoang sÆ¡ vá»›i cÃ¡c bÃ£i biá»ƒn Ä‘áº¹p, hoáº¡t Ä‘á»™ng team building sÃ´i ná»•i vÃ  tiá»‡c BBQ háº£i sáº£n Ä‘Ã¡ng nhá»›. Tuy nhiÃªn, rá»§i ro thá»i tiáº¿t cuá»‘i thÃ¡ng 7 lÃ  ráº¥t cao, cáº§n theo dÃµi sÃ¡t sao vÃ  chuáº©n bá»‹ phÆ°Æ¡ng Ã¡n dá»± phÃ²ng.",
                itinerary: [
                    { day: "NgÃ y 1: HÃ nh trÃ¬nh ra Ä‘áº£o", activities: "<b>07:00 - 08:00:</b> Táº­p trung táº¡i nhÃ  Linh (Tá»« SÆ¡n, Báº¯c Ninh).<br><b>08:00 - 11:30:</b> Di chuyá»ƒn tá»« Tá»« SÆ¡n Ä‘áº¿n Cáº£ng CÃ¡i Rá»“ng (VÃ¢n Äá»“n, Quáº£ng Ninh) báº±ng xe 16 chá»— hoáº·c Limousine. NÃªn thuÃª xe 16 chá»— Ä‘á»ƒ tiá»‡n lá»£i vÃ  tiáº¿t kiá»‡m chi phÃ­ cho nhÃ³m.<br><b>11:30 - 13:00:</b> Ä‚n trÆ°a táº¡i khu vá»±c Cáº£ng CÃ¡i Rá»“ng vÃ  mua vÃ© tÃ u ra Ä‘áº£o. <br><b>13:15 - 14:45:</b> LÃªn tÃ u cao tá»‘c tá»« cáº£ng CÃ¡i Rá»“ng ra Ä‘áº£o CÃ´ TÃ´ (khoáº£ng 90-100 phÃºt). CÃ¡c hÃ£ng uy tÃ­n: Havaco, Kalong, CÃ´ TÃ´ 68, Quang Minh, Háº£i Vinh 89, PhÃºc Thá»‹nh.<br><b>15:00 - 17:00:</b> Äáº¿n CÃ´ TÃ´, di chuyá»ƒn vá» homestay/nhÃ  nghá»‰ (thuÃª xe Ä‘iá»‡n, xe mÃ¡y hoáº·c xe Ä‘áº¡p). Nháº­n phÃ²ng vÃ  nghá»‰ ngÆ¡i.<br><b>17:00 - 18:30:</b> Tá»± do khÃ¡m phÃ¡ thá»‹ tráº¥n CÃ´ TÃ´, dáº¡o bÆ°á»›c trÃªn 'Con Ä‘Æ°á»ng tÃ¬nh yÃªu' lÃ£ng máº¡n.<br><b>19:00 - 21:00:</b> Ä‚n tá»‘i háº£i sáº£n tÆ°Æ¡i ngon. CÃ³ thá»ƒ lá»±a chá»n nhÃ  hÃ ng (Sá»©a, HoÃ ng HÃ´n, Ngá»c Quá»³nh, Háº£i Ã‚u, Ãšy Thanh) hoáº·c mua háº£i sáº£n táº¡i chá»£ Ä‘á»‹a phÆ°Æ¡ng (á»‘c mÃ³ng tay, sÃ¡ sÃ¹ng, má»±c, tu hÃ i, gháº¹, cÃ¡ song, cáº§u gai, cÃ¹ ká»³) vÃ  nhá» homestay cháº¿ biáº¿n hoáº·c tá»± tá»• chá»©c tiá»‡c BBQ.<br><b>21:00 trá»Ÿ Ä‘i:</b> Dáº¡o biá»ƒn, thÆ°á»Ÿng thá»©c cÃ  phÃª hoáº·c chuáº©n bá»‹ cho hoáº¡t Ä‘á»™ng cÃ¢u má»±c Ä‘Ãªm (náº¿u cÃ³ Ä‘iá»u kiá»‡n)." },
                    { day: "NgÃ y 2: KhÃ¡m phÃ¡ cÃ¡c bÃ£i biá»ƒn & Äiá»ƒm Check-in Ná»•i Tiáº¿ng", activities: "<b>05:00 - 06:30:</b> ÄÃ³n bÃ¬nh minh táº¡i BÃ£i Ä‘Ã¡ Cáº§u Má»µ - nÆ¡i cÃ³ nhá»¯ng vÃ¡ch Ä‘Ã¡ dá»±ng Ä‘á»©ng ká»³ vÄ© vÃ  sÃ³ng biá»ƒn tung bá»t tráº¯ng xÃ³a, lÃ½ tÆ°á»Ÿng cho nhá»¯ng bá»©c áº£nh Ä‘á»™c Ä‘Ã¡o.<br><b>07:00 - 08:00:</b> Ä‚n sÃ¡ng táº¡i quÃ¡n Äƒn Ä‘á»‹a phÆ°Æ¡ng (gá»£i Ã½: quÃ¡n Äƒn sÃ¡ng Cá»• NghÄ©a vá»›i chÃ¡o, xÃ´i, phá»Ÿ háº£i sáº£n giÃ¡ 30.000 - 40.000 VNÄ/bÃ¡t).<br><b>08:30 - 11:30:</b> Táº¯m biá»ƒn vÃ  vui chÆ¡i táº¡i BÃ£i biá»ƒn VÃ n Cháº£y (cÃ¡t dÃ i, sÃ³ng to, thÃ­ch há»£p thá»ƒ thao biá»ƒn) hoáº·c BÃ£i biá»ƒn Há»“ng VÃ n (hoang sÆ¡, yÃªn bÃ¬nh, nÆ°á»›c trong xanh, chÃ¨o Kayak).<br><b>12:00 - 13:30:</b> Ä‚n trÆ°a táº¡i nhÃ  hÃ ng gáº§n biá»ƒn hoáº·c tá»± tá»• chá»©c BBQ.<br><b>14:30 - 17:00:</b> Tham quan Ngá»n Háº£i ÄÄƒng CÃ´ TÃ´ (view toÃ n cáº£nh thá»‹ tráº¥n), Con Ä‘Æ°á»ng tÃ¬nh yÃªu & TÆ°á»£ng Ä‘Ã i BÃ¡c Há»“, Rá»«ng chÃµi nguyÃªn sinh (há»‡ thá»±c váº­t phong phÃº, khÃ´ng khÃ­ trong lÃ nh), NhÃ  thá» CÃ´ TÃ´ (kiáº¿n trÃºc Ä‘á»™c Ä‘Ã¡o).<br><b>17:30 - 18:30:</b> Tá»± do nghá»‰ ngÆ¡i, chuáº©n bá»‹ cho buá»•i tá»‘i.<br><b>19:00 - 21:00:</b> Tiá»‡c BBQ háº£i sáº£n trÃªn bÃ£i biá»ƒn, káº¿t há»£p team building, Ä‘á»‘t lá»­a tráº¡i vÃ  hÃ¡t hÃ².<br><b>21:00 trá»Ÿ Ä‘i:</b> CÃ¢u má»±c Ä‘Ãªm cÃ¹ng ngÆ° dÃ¢n (náº¿u cÃ³ Ä‘iá»u kiá»‡n vÃ  nhÃ³m quan tÃ¢m)." },
                    { day: "NgÃ y 3: CÃ´ TÃ´ Con & Trá»Ÿ vá»", activities: "<b>07:00 - 08:00:</b> Ä‚n sÃ¡ng vÃ  lÃ m thá»§ tá»¥c tráº£ phÃ²ng homestay.<br><b>08:30 - 11:30:</b> Tham quan Äáº£o CÃ´ TÃ´ Con - Ä‘áº£o hoang sÆ¡ vá»›i cÃ¡t tráº¯ng, nÆ°á»›c biá»ƒn trong xanh, há»‡ sinh thÃ¡i Ä‘a dáº¡ng. CÃ³ thá»ƒ táº¯m biá»ƒn, láº·n ngáº¯m san hÃ´ hoáº·c trekking rá»«ng (cáº§n há»i ká»¹ vá» Ä‘iá»u kiá»‡n thá»i tiáº¿t vÃ  lá»‹ch trÃ¬nh tÃ u/thuyá»n).<br><b>12:00 - 13:00:</b> Ä‚n trÆ°a táº¡i CÃ´ TÃ´.<br><b>13:30 - 15:00:</b> Di chuyá»ƒn ra cáº£ng vÃ  lÃªn tÃ u cao tá»‘c vá» CÃ¡i Rá»“ng.<br><b>15:30 - 19:00:</b> Di chuyá»ƒn tá»« CÃ¡i Rá»“ng vá» Tá»« SÆ¡n báº±ng xe Ä‘Ã£ Ä‘áº·t hoáº·c xe Limousine/xe khÃ¡ch.<br><b>19:00:</b> Vá» Ä‘áº¿n Tá»« SÆ¡n, káº¿t thÃºc chuyáº¿n Ä‘i." },
                ],
                costBreakdown: {
                    labels: ['Di chuyá»ƒn', 'Chá»— á»Ÿ', 'Ä‚n uá»‘ng', 'Hoáº¡t Ä‘á»™ng', 'PhÃ¡t sinh'],
                    data: [860, 230, 1125, 300, 350]
                },
                lodgingFood: `
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">Chá»— á»Ÿ (Æ¯u tiÃªn homestay/nhÃ  nghá»‰ cÃ³ phÃ²ng dorm hoáº·c phÃ²ng lá»›n, tiá»‡n Ã­ch báº¿p chung/BBQ)</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                            <li><b>NhÃ  nghá»‰ Mai Lan:</b> PhÃ²ng dorm khoáº£ng 80.000 VNÄ/ngÆ°á»i, phÃ²ng Ä‘Ã´i 300.000 - 450.000 VNÄ/phÃ²ng. Ráº¥t tiáº¿t kiá»‡m cho nhÃ³m lá»›n.</li>
                            <li><b>NhÃ  nghá»‰ Thanh MÄƒng (28 phÃ²ng), CÃ´ng Äáº¯c (8 phÃ²ng), ThÃ¹y Linh (7 phÃ²ng), TÃ¢m TuyÃªn (4 phÃ²ng gá»— Ä‘Ã´i), Tháº¯m GiÃ¡p (17 phÃ²ng):</b> CÃ¡c lá»±a chá»n cÃ³ sá»‘ lÆ°á»£ng phÃ²ng Ä‘á»§ lá»›n Ä‘á»ƒ nhÃ³m thuÃª nhiá»u phÃ²ng liá»n ká». GiÃ¡ 400.000 - 800.000 VNÄ/phÃ²ng.</li>
                            <li><b>Homestay CÃ´ TÃ´ Haki:</b> NhÃ  hai táº§ng, thiáº¿t káº¿ hiá»‡n Ä‘áº¡i, phÃ²ng hai giÆ°á»ng Ä‘Ã´i, phÃ¹ há»£p nhÃ³m lá»›n.</li>
                            <li><b>Homestay CÆ°á»ng Thá»‹nh CÃ´ TÃ´:</b> TÃ²a nhÃ  nhiá»u táº§ng vá»›i 30 phÃ²ng, giÃ¡ cáº£ pháº£i chÄƒng.</li>
                            <li>Há»i rÃµ vá» tiá»‡n Ã­ch báº¿p chung vÃ  khu vá»±c BBQ khi Ä‘áº·t phÃ²ng.</li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">Ä‚n uá»‘ng (Mua háº£i sáº£n tÆ°Æ¡i sá»‘ng vÃ  tá»± tá»• chá»©c BBQ lÃ  tiáº¿t kiá»‡m nháº¥t)</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                            <li><b>Tiáº¿t kiá»‡m nháº¥t:</b> Mua háº£i sáº£n tÆ°Æ¡i (á»‘c mÃ³ng tay, sÃ¡ sÃ¹ng, má»±c, tu hÃ i, gháº¹, cÃ¡ song, cáº§u gai, cÃ¹ ká»³) táº¡i chá»£ Ä‘á»‹a phÆ°Æ¡ng vÃ  nhá» homestay cháº¿ biáº¿n hoáº·c tá»± tá»• chá»©c tiá»‡c BBQ.</li>
                            <li><b>QuÃ¡n Äƒn sÃ¡ng Cá»• NghÄ©a:</b> ChÃ¡o, xÃ´i, phá»Ÿ háº£i sáº£n giÃ¡ 30.000 - 40.000 VNÄ/bÃ¡t.</li>
                            <li><b>CÃ¡c nhÃ  hÃ ng háº£i sáº£n:</b> Sá»©a, HoÃ ng HÃ´n, Ngá»c Quá»³nh, Háº£i Ã‚u, Ãšy Thanh (giÃ¡ bÃ¬nh dÃ¢n).</li>
                        </ul>
                    </div>
                `
            },
            quanlan: {
                name: "Quan Láº¡n",
                duration: "3 NgÃ y 2 ÄÃªm",
                cost: "2.1 - 3.2 triá»‡u",
                minCostForChart: 2.16,
                maxCostForChart: 3.21,
                risk: "<span class='text-red-600'>CAO âš ï¸</span>",
                riskLevelForChart: 3,
                highlight: "Eo GiÃ³, BÃ£i Minh ChÃ¢u, ÄÃ¬nh Quan Láº¡n, DÃ²ng sÃ´ng Ä‘Ã´i bá» cÃ¡t tráº¯ng, chi phÃ­ tÃ u tháº¥p hÆ¡n.",
                votes: 0,
                intro: "Quan Láº¡n lÃ  lá»±a chá»n cÃ³ chi phÃ­ tháº¥p hÆ¡n má»™t chÃºt so vá»›i CÃ´ TÃ´, vá»›i váº» Ä‘áº¹p bÃ¬nh yÃªn vÃ  nhiá»u Ä‘iá»ƒm check-in Ä‘á»™c Ä‘Ã¡o nhÆ° Eo GiÃ³, bÃ£i Minh ChÃ¢u. TÆ°Æ¡ng tá»± CÃ´ TÃ´, rá»§i ro thá»i tiáº¿t cuá»‘i thÃ¡ng 7 lÃ  ráº¥t cao vÃ  cáº§n Ä‘Æ°á»£c cÃ¢n nháº¯c ká»¹ lÆ°á»¡ng.",
                itinerary: [
                    { day: "NgÃ y 1: HÃ nh trÃ¬nh ra Ä‘áº£o", activities: "<b>07:00 - 08:00:</b> Táº­p trung táº¡i nhÃ  Linh (Tá»« SÆ¡n, Báº¯c Ninh).<br><b>08:00 - 11:30:</b> Di chuyá»ƒn tá»« Tá»« SÆ¡n Ä‘áº¿n Cáº£ng CÃ¡i Rá»“ng (VÃ¢n Äá»“n, Quáº£ng Ninh) báº±ng xe 16 chá»— hoáº·c Limousine.<br><b>11:30 - 13:00:</b> Ä‚n trÆ°a táº¡i khu vá»±c Cáº£ng CÃ¡i Rá»“ng vÃ  mua vÃ© tÃ u ra Ä‘áº£o.<br><b>13:15 - 14:00:</b> LÃªn tÃ u cao tá»‘c tá»« cáº£ng CÃ¡i Rá»“ng ra Ä‘áº£o Quan Láº¡n (chá»‰ khoáº£ng 45 phÃºt, giÃ¡ vÃ© 100.000 - 200.000 VNÄ/lÆ°á»£t). CÃ¡c hÃ£ng: Quang Minh, HoÃ ng Vy, Ngá»c Tháº¿ 68, ThÃ nh HÆ°ng.<br><b>14:00 - 16:00:</b> Äáº¿n Quan Láº¡n, di chuyá»ƒn vá» homestay/nhÃ  nghá»‰, nháº­n phÃ²ng vÃ  nghá»‰ ngÆ¡i (thuÃª xe Ä‘iá»‡n, xe mÃ¡y hoáº·c xe Ä‘áº¡p Ä‘á»ƒ di chuyá»ƒn trÃªn Ä‘áº£o).<br><b>16:00 - 18:00:</b> Tá»± do khÃ¡m phÃ¡ BÃ£i biá»ƒn Quan Láº¡n vá»›i bá» cÃ¡t tráº¯ng má»‹n vÃ  nÆ°á»›c biá»ƒn xanh trong.<br><b>19:00 - 21:00:</b> Ä‚n tá»‘i háº£i sáº£n tÆ°Æ¡i ngon. NhÃ³m cÃ³ thá»ƒ mua háº£i sáº£n (sÃ¡ sÃ¹ng, sá»©a, tu hÃ i, bá» bá», sam biá»ƒn, á»‘c mÃ³ng tay, cáº§u gai, má»±c, cÃ¹ ká»³, tÃ´m he, cÃ  ghim, ngao, hÃ u) [23, 24] táº¡i chá»£ vÃ  nhá» homestay cháº¿ biáº¿n hoáº·c tá»± tá»• chá»©c tiá»‡c BBQ.<br><b>21:00 trá»Ÿ Ä‘i:</b> Dáº¡o biá»ƒn, thÆ°á»Ÿng thá»©c cÃ  phÃª hoáº·c chuáº©n bá»‹ cho hoáº¡t Ä‘á»™ng cÃ¢u má»±c Ä‘Ãªm cÃ¹ng ngÆ° dÃ¢n (náº¿u cÃ³)." },
                    { day: "NgÃ y 2: KhÃ¡m PhÃ¡ CÃ¡c BÃ£i Biá»ƒn & Di TÃ­ch Lá»‹ch Sá»­", activities: "<b>05:00 - 06:30:</b> ÄÃ³n bÃ¬nh minh táº¡i Eo GiÃ³ Quan Láº¡n - Ä‘iá»ƒm check-in 'Ä‘á»‰nh cá»§a chÃ³p' vá»›i khung cáº£nh nÃºi Ä‘Ã¡ hÃ¹ng vÄ© vÃ  Ä‘áº¡i dÆ°Æ¡ng xanh ngÃ¡t.<br><b>07:00 - 08:00:</b> Ä‚n sÃ¡ng táº¡i quÃ¡n Äƒn Ä‘á»‹a phÆ°Æ¡ng.<br><b>08:30 - 11:30:</b> Táº¯m biá»ƒn vÃ  vui chÆ¡i táº¡i BÃ£i biá»ƒn Minh ChÃ¢u (cÃ¡t tráº¯ng má»‹n, nÆ°á»›c trong xanh, sÃ³ng Ãªm, thÃ­ch há»£p mÃ´ tÃ´ nÆ°á»›c, thuyá»n kÃ©o phao) hoáº·c BÃ£i biá»ƒn SÆ¡n HÃ o (hoang sÆ¡, yÃªn bÃ¬nh, Ã­t ngÆ°á»i lui tá»›i, ngáº¯m hoÃ ng hÃ´n).<br><b>12:00 - 13:30:</b> Ä‚n trÆ°a táº¡i nhÃ  hÃ ng ven biá»ƒn hoáº·c tá»± tá»• chá»©c BBQ.<br><b>14:30 - 17:00:</b> Tham quan ÄÃ¬nh Quan Láº¡n (di tÃ­ch lá»‹ch sá»­ quá»‘c gia), Miáº¿u thá» Tráº§n KhÃ¡nh DÆ°, DÃ²ng sÃ´ng Ä‘Ã´i bá» cÃ¡t tráº¯ng (gÃ³c check-in 'tháº§n thÃ¡nh'), BÃ£i cá» chÃ¢u Ã‚u & Äá»“i VÃ´ Cá»±c (Ä‘iá»ƒm check-in má»›i láº¡), Rá»«ng cÃ¢y sá»‘ng áº£o (nÆ¡i Ã¡nh sÃ¡ng táº¡o ra vÃ´ vÃ n Ä‘á»‘m sÃ¡ng).<br><b>17:30 - 18:30:</b> Tá»± do nghá»‰ ngÆ¡i, chuáº©n bá»‹ cho buá»•i tá»‘i.<br><b>19:00 - 21:00:</b> Tiá»‡c BBQ háº£i sáº£n trÃªn bÃ£i biá»ƒn hoáº·c táº¡i homestay.<br><b>21:00 trá»Ÿ Ä‘i:</b> Team building, Ä‘á»‘t lá»­a tráº¡i (náº¿u cÃ³), hoáº·c dáº¡o biá»ƒn." },
                    { day: "NgÃ y 3: VÆ°á»n Quá»‘c Gia Ba MÃ¹n & Trá»Ÿ Vá» Tá»« SÆ¡n", activities: "<b>07:00 - 08:00:</b> Ä‚n sÃ¡ng vÃ  lÃ m thá»§ tá»¥c tráº£ phÃ²ng homestay.<br><b>08:30 - 11:30:</b> KhÃ¡m phÃ¡ VÆ°á»n Quá»‘c Gia Ba MÃ¹n (náº¿u thá»i gian cho phÃ©p) - nÆ¡i táº­n hÆ°á»Ÿng khÃ´ng khÃ­ trong lÃ nh, cÃ¢y xanh quÃ½ hiáº¿m (cáº§n cÃ¢n nháº¯c ká»¹ vá»›i lá»‹ch trÃ¬nh tÃ u vá»).<br><b>12:00 - 13:00:</b> Ä‚n trÆ°a táº¡i Quan Láº¡n.<br><b>13:30 - 14:30:</b> Di chuyá»ƒn ra cáº£ng vÃ  lÃªn tÃ u cao tá»‘c vá» CÃ¡i Rá»“ng.<br><b>15:00 - 18:30:</b> Di chuyá»ƒn tá»« CÃ¡i Rá»“ng vá» Tá»« SÆ¡n báº±ng xe Ä‘Ã£ Ä‘áº·t hoáº·c xe Limousine/xe khÃ¡ch.<br><b>18:30:</b> Vá» Ä‘áº¿n Tá»« SÆ¡n, káº¿t thÃºc chuyáº¿n Ä‘i." },
                ],
                costBreakdown: {
                    labels: ['Di chuyá»ƒn', 'Chá»— á»Ÿ', 'Ä‚n uá»‘ng', 'Hoáº¡t Ä‘á»™ng', 'PhÃ¡t sinh'],
                    data: [660, 400, 1125, 200, 350]
                },
                lodgingFood: `
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">Chá»— á»Ÿ (GiÃ¡ tá»‘t, cÃ³ sÃ¢n vÆ°á»n BBQ hoáº·c gáº§n biá»ƒn)</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                            <li><b>Villa Hoa Giáº¥y:</b> 200.000 â€“ 500.000 VNÄ/Ä‘Ãªm, phong cÃ¡ch Äá»‹a Trung Háº£i, sÃ¢n vÆ°á»n rá»™ng, phÃ¹ há»£p nhÃ³m.</li>
                            <li><b>Mai Homestay:</b> 150.000 â€“ 400.000 VNÄ/Ä‘Ãªm, khÃ´ng gian má»™c máº¡c, phÃ²ng 'tá»• chim', cÃ³ BBQ, karaoke, thuÃª xe Ä‘áº¡p.</li>
                            <li><b>NhÃ­m Homestay:</b> Tá»« 340.000 VNÄ/Ä‘Ãªm, gáº§n bÃ£i Minh ChÃ¢u (400m), cÃ³ xe Ä‘Æ°a Ä‘Ã³n miá»…n phÃ­, sÃ¢n vÆ°á»n rá»™ng cho BBQ, thuÃª xe Ä‘áº¡p.</li>
                            <li><b>NhÃ  nghá»‰ TuÃ¢n Thá»§y:</b> Tá»« 300.000 VNÄ/Ä‘Ãªm, phÃ²ng rá»™ng rÃ£i, chá»§ nhÃ  nhiá»‡t tÃ¬nh, phÃ¹ há»£p nhÃ³m tiáº¿t kiá»‡m.</li>
                            <li>CÃ¡c lá»±a chá»n khÃ¡c: Minh VÅ©, ThÃ nh ThÃºy (tá»« 170.000 VNÄ/Ä‘Ãªm), NgÃ¢n HÃ  (tá»« 300.000 VNÄ/Ä‘Ãªm) â€“ giÃ¡ tá»‘t, gáº§n biá»ƒn.</li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">Ä‚n uá»‘ng (Æ¯u tiÃªn háº£i sáº£n tÆ°Æ¡i sá»‘ng tá»± cháº¿ biáº¿n)</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                           <li>Mua háº£i sáº£n tÆ°Æ¡i sá»‘ng (sÃ¡ sÃ¹ng, sá»©a, tu hÃ i, bá» bá», sam biá»ƒn, á»‘c mÃ³ng tay, má»±c, cÃ¹ ká»³, tÃ´m he, cÃ  ghim, ngao, hÃ u) [23, 24] táº¡i chá»£ Ä‘á»‹a phÆ°Æ¡ng vÃ  tá»± tá»• chá»©c BBQ hoáº·c nhá» homestay há»— trá»£.</li>
                           <li>Há»i chá»§ homestay hoáº·c ngÆ°á»i dÃ¢n Ä‘á»‹a phÆ°Æ¡ng Ä‘á»ƒ Ä‘Æ°á»£c gá»£i Ã½ cÃ¡c quÃ¡n Äƒn bÃ¬nh dÃ¢n, ngon miá»‡ng.</li>
                        </ul>
                    </div>
                `
            },
            quangbinh: {
                name: "Quáº£ng BÃ¬nh",
                duration: "4 NgÃ y 3 ÄÃªm",
                cost: "3.0 - 4.5 triá»‡u",
                minCostForChart: 3.01,
                maxCostForChart: 4.49,
                risk: "<span class='text-amber-600'>TRUNG BÃŒNH â˜€ï¸</span>",
                riskLevelForChart: 2,
                highlight: "Hang Ä‘á»™ng (Phong Nha/ThiÃªn ÄÆ°á»ng), Zipline, Kayak, Äá»“i CÃ¡t Quang PhÃº, áº©m thá»±c Ä‘a dáº¡ng.",
                votes: 0,
                intro: "Quáº£ng BÃ¬nh lÃ  lá»±a chá»n an toÃ n nháº¥t vá» thá»i tiáº¿t, ráº¥t phÃ¹ há»£p cho nhÃ³m sinh viÃªn nÄƒng Ä‘á»™ng, yÃªu thÃ­ch khÃ¡m phÃ¡ vÃ  máº¡o hiá»ƒm. Chuyáº¿n Ä‘i dÃ i ngÃ y hÆ¡n, chi phÃ­ cao hÆ¡n nhÆ°ng bÃ¹ láº¡i lÃ  nhá»¯ng tráº£i nghiá»‡m Ä‘á»™c nháº¥t táº¡i 'vÆ°Æ¡ng quá»‘c hang Ä‘á»™ng' vÃ  cÃ¡c hoáº¡t Ä‘á»™ng Zipline, trÆ°á»£t cÃ¡t.",
                itinerary: [
                    { day: "NgÃ y 1: HÃ nh trÃ¬nh dÃ i Ä‘áº¿n Äá»“ng Há»›i", activities: "<b>07:00 - 08:00:</b> Táº­p trung táº¡i nhÃ  Linh (Tá»« SÆ¡n, Báº¯c Ninh).<br><b>08:00 - 09:00:</b> Di chuyá»ƒn tá»« Tá»« SÆ¡n Ä‘áº¿n HÃ  Ná»™i báº±ng Limousine (Máº¡nh Hiáº¿u, Viá»‡t HoÃ ng, TÃ¹ng Tuáº¥n, HÃ¹ng CÆ°á»ng, PhÃºc XuyÃªn Limousine) cÃ³ dá»‹ch vá»¥ Ä‘Ã³n/tráº£ táº­n nÆ¡i.<br><b>09:00 - 10:00:</b> Di chuyá»ƒn Ä‘áº¿n Ä‘iá»ƒm Ä‘Ã³n xe khÃ¡ch/tÃ u há»a táº¡i HÃ  Ná»™i.<br><b>10:00 - 20:00 (hoáº·c qua Ä‘Ãªm):</b> Di chuyá»ƒn tá»« HÃ  Ná»™i Ä‘áº¿n Äá»“ng Há»›i (Quáº£ng BÃ¬nh) báº±ng xe khÃ¡ch giÆ°á»ng náº±m qua Ä‘Ãªm (250.000 - 460.000 VNÄ/ngÆ°á»i) Ä‘á»ƒ tá»‘i Æ°u chi phÃ­ vÃ  thá»i gian. CÃ¡c hÃ£ng: SÃ¢m HÆ°Æ¡ng, Kim Chi 265, HK BUSLINES, Quang DÅ©ng VIP, Äá»©c Thá»‹nh, Thuáº­n Hiá»n, Camel Travel, Queen Cafe, Nháº­t Tuáº¥n, VÄƒn ThÃ´ng, HoÃ ng Linh.<br><b>20:00 (hoáº·c sÃ¡ng hÃ´m sau):</b> Äáº¿n Äá»“ng Há»›i, di chuyá»ƒn vá» homestay/khÃ¡ch sáº¡n, nháº­n phÃ²ng vÃ  nghá»‰ ngÆ¡i.<br><b>20:30 trá»Ÿ Ä‘i:</b> KhÃ¡m phÃ¡ thÃ nh phá»‘ Äá»“ng Há»›i vá» Ä‘Ãªm, dáº¡o BÃ£i biá»ƒn Nháº­t Lá»‡ hoáº·c SÃ´ng Nháº­t Lá»‡.<br><b>21:00 trá»Ÿ Ä‘i:</b> Ä‚n tá»‘i Ä‘áº·c sáº£n Quáº£ng BÃ¬nh (BÃ¡nh khoÃ¡i Tá»© QuÃ½, BÃ¡nh lá»c má»‡ XuÃ¢n, BÃ¡nh bÃ¨o cÃ´ VÃ¢n, ChÃ¡o sÃ¡t cÃ¡ lÃ³c Huyá»n NhÃ¢n, ChÃ¡o canh Gia Báº£o)." },
                    { day: "NgÃ y 2: KhÃ¡m phÃ¡ hang Ä‘á»™ng & Hoáº¡t Ä‘á»™ng máº¡o hiá»ƒm", activities: "<b>07:00 - 08:00:</b> Ä‚n sÃ¡ng táº¡i homestay hoáº·c quÃ¡n Äƒn Ä‘á»‹a phÆ°Æ¡ng.<br><b>08:30 - 12:00:</b> Tham quan Äá»™ng Phong Nha (há»‡ thá»‘ng sÃ´ng cháº£y ngáº§m, bÃ£i cÃ¡t/Ä‘Ã¡ Ä‘áº¹p) hoáº·c Äá»™ng ThiÃªn ÄÆ°á»ng ('hoÃ ng cung trong lÃ²ng Ä‘áº¥t' vá»›i tháº¡ch nhÅ© ká»³ vÄ©).<br><b>12:30 - 13:30:</b> Ä‚n trÆ°a táº¡i khu vá»±c Phong Nha (gá»£i Ã½: NhÃ  hÃ ng SÆ¡n ÄoÃ²ng, khoáº£ng 110.000-180.000Ä‘/suáº¥t cho bÃ n 10 khÃ¡ch).<br><b>14:00 - 17:00:</b> Tráº£i nghiá»‡m SÃ´ng ChÃ y â€“ Hang Tá»‘i (Zipline, chÃ¨o Kayak, táº¯m sÃ´ng, vÃ© khoáº£ng 270.000 VNÄ/ngÆ°á»i) hoáº·c Suá»‘i NÆ°á»›c Moá»c (chÃ¨o Kayak, táº¯m suá»‘i, vÃ© 80.000 VNÄ/ngÆ°á»i lá»›n) â€“ phÃ¹ há»£p vá»›i nhÃ³m yÃªu thÃ­ch máº¡o hiá»ƒm.<br><b>17:30 - 18:30:</b> Di chuyá»ƒn vá» Äá»“ng Há»›i.<br><b>19:00 - 21:00:</b> Ä‚n tá»‘i háº£i sáº£n táº¡i Äá»“ng Há»›i (gá»£i Ã½: LÆ°Æ¡ng Chinh, QB Biá»ƒn, QuÃ¡n GiÃ³ Biá»ƒn, ThiÃªn PhÃº quÃ¡n).<br><b>21:00 trá»Ÿ Ä‘i:</b> Tá»± do khÃ¡m phÃ¡ Äá»“ng Há»›i vá» Ä‘Ãªm." },
                    { day: "NgÃ y 3: Äá»“i cÃ¡t & CÃ¡c Ä‘iá»ƒm check-in khÃ¡c", activities: "<b>07:00 - 08:00:</b> Ä‚n sÃ¡ng.<br><b>08:30 - 11:30:</b> Tráº£i nghiá»‡m trÆ°á»£t cÃ¡t táº¡i Äá»“i CÃ¡t Quang PhÃº - má»™t trong nhá»¯ng Ä‘á»“i cÃ¡t Ä‘áº¹p nháº¥t miá»n Trung, lÃ½ tÆ°á»Ÿng Ä‘á»ƒ chá»¥p áº£nh vÃ  trÆ°á»£t cÃ¡t.<br><b>12:00 - 13:00:</b> Ä‚n trÆ°a.<br><b>14:00 - 17:00:</b> Tham quan cÃ¡c di tÃ­ch lá»‹ch sá»­ vÃ  Ä‘iá»ƒm check-in trong thÃ nh phá»‘ Äá»“ng Há»›i: Quáº£ng BÃ¬nh Quan (trung tÃ¢m thÃ nh phá»‘), TÆ°á»£ng Ä‘Ã i Máº¹ Suá»‘t (biá»ƒu tÆ°á»£ng ngÆ°á»i phá»¥ ná»¯ anh hÃ¹ng), VÅ©ng ChÃ¹a â€“ Äáº£o Yáº¿n (nÆ¡i an nghá»‰ cá»§a Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p, bÃ£i biá»ƒn hoang sÆ¡ â€“ cáº§n cÃ¢n nháº¯c thá»i gian di chuyá»ƒn xa).<br><b>17:30 - 18:30:</b> Tá»± do nghá»‰ ngÆ¡i.<br><b>19:00 - 21:00:</b> Ä‚n tá»‘i Ä‘áº·c sáº£n Ä‘á»‹a phÆ°Æ¡ng hoáº·c háº£i sáº£n.<br><b>21:00 trá»Ÿ Ä‘i:</b> Dáº¡o phá»‘, mua sáº¯m quÃ  lÆ°u niá»‡m." },
                    { day: "NgÃ y 4: Mua sáº¯m & Trá»Ÿ vá»", activities: "<b>07:00 - 08:00:</b> Ä‚n sÃ¡ng.<br><b>08:30 - 11:00:</b> Mua sáº¯m Ä‘áº·c sáº£n Quáº£ng BÃ¬nh lÃ m quÃ  (háº£i sáº£n khÃ´, cÃ¡c loáº¡i bÃ¡nh Ä‘áº·c trÆ°ng).<br><b>11:30 - 12:30:</b> Ä‚n trÆ°a.<br><b>13:00:</b> Di chuyá»ƒn ra Ä‘iá»ƒm Ä‘Ã³n xe khÃ¡ch/tÃ u há»a/sÃ¢n bay Ä‘á»ƒ vá» HÃ  Ná»™i.<br><b>13:00 trá»Ÿ Ä‘i:</b> Di chuyá»ƒn tá»« Äá»“ng Há»›i vá» HÃ  Ná»™i, sau Ä‘Ã³ vá» Tá»« SÆ¡n.<br><b>23:00 - 00:00:</b> Vá» Ä‘áº¿n Tá»« SÆ¡n, káº¿t thÃºc chuyáº¿n Ä‘i." },
                ],
                costBreakdown: {
                    labels: ['Di chuyá»ƒn', 'Chá»— á»Ÿ', 'Ä‚n uá»‘ng', 'Hoáº¡t Ä‘á»™ng', 'PhÃ¡t sinh'],
                    data: [1000, 600, 1200, 450, 500]
                },
                lodgingFood: `
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">Chá»— á»Ÿ (Æ¯u tiÃªn homestay cÃ³ phÃ²ng dorm/phÃ²ng lá»›n cho nhÃ³m)</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                             <li><b>Táº¡i Äá»“ng Há»›i:</b>
                                 <ul>
                                    <li><b>Adp Homestay & Coffee:</b> 200.000 â€“ 500.000 VNÄ/Ä‘Ãªm, cÃ³ phÃ²ng dorm, báº¿p chung.</li>
                                    <li><b>Dolphin Homestay:</b> 200.000 â€“ 600.000 VNÄ/Ä‘Ãªm, cÃ³ thá»ƒ thuÃª nguyÃªn cÄƒn, phÃ¹ há»£p nhÃ³m Ä‘Ã´ng.</li>
                                    <li><b>Cá»‘i Xay GiÃ³ homestay & coffee:</b> 250.000 â€“ 500.000 VNÄ/Ä‘Ãªm, chá»‰ cÃ³ phÃ²ng dorm, gáº§n bÃ£i táº¯m Báº£o Ninh.</li>
                                    <li><b>Adam Eva Homestay:</b> Tá»« 250.000 VNÄ/ngÆ°á»i, chá»‰ cÃ³ phÃ²ng dorm.</li>
                                    <li><b>LÃ ng Biá»ƒn homestay:</b> Nhiá»u loáº¡i phÃ²ng, gáº§n bÃ£i biá»ƒn Nháº­t Lá»‡, phÃ¹ há»£p nhÃ³m báº¡n.</li>
                                 </ul>
                             </li>
                             <li><b>Táº¡i Phong Nha (náº¿u muá»‘n á»Ÿ gáº§n hang Ä‘á»™ng):</b>
                                 <ul>
                                     <li><b>An An Homestay:</b> 100.000 â€“ 600.000 VNÄ/Ä‘Ãªm, phÃ²ng rá»™ng 24-45mÂ², chá»©a Ä‘áº¿n 30 ngÆ°á»i, bao gá»“m 1-3 bá»¯a Äƒn/ngÃ y.</li>
                                     <li>CÃ¡c homestay khÃ¡c: Sy's Homestay, Sunshine Homestay, Tropical Valley Homestay, Jungle Boss Homestay, BeHome homestay, Pomelo homestay, Barefoot homestay, Bamboo's House.</li>
                                 </ul>
                             </li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h4 class="font-bold text-lg mb-2">Ä‚n uá»‘ng (áº¨m thá»±c Ä‘a dáº¡ng, giÃ¡ cáº£ pháº£i chÄƒng)</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                           <li><b>Äáº·c sáº£n Ä‘á»‹a phÆ°Æ¡ng giÃ¡ ráº»:</b> BÃ¡nh khoÃ¡i, bÃ¡nh lá»c, bÃ¡nh bÃ¨o (15.000 - 60.000 VNÄ/mÃ³n). ChÃ¡o sÃ¡t cÃ¡ lÃ³c Huyá»n NhÃ¢n (15.000 - 20.000 VNÄ/tÃ´), ChÃ¡o canh Gia Báº£o (20.000 - 30.000 VNÄ/tÃ´).</li>
                           <li><b>Háº£i sáº£n tÆ°Æ¡i ngon:</b> CÃ¡c quÃ¡n bÃ¬nh dÃ¢n á»Ÿ Äá»“ng Há»›i nhÆ° LÆ°Æ¡ng Chinh, QB Biá»ƒn, QuÃ¡n GiÃ³ Biá»ƒn, ThiÃªn PhÃº quÃ¡n (giÃ¡ 10.000 - 300.000 VNÄ/mÃ³n tÃ¹y loáº¡i).</li>
                        </ul>
                    </div>
                `
            }
        };

        const chartInstances = {};
        let voterHistory = {}; // Global to store voter data

        // Function to show custom message box
        function showMessageBox(title, content) {
            const overlay = document.getElementById('messageBoxOverlay');
            document.getElementById('messageBoxTitle').innerText = title;
            document.getElementById('messageBoxContent').innerText = content;
            overlay.classList.remove('hidden');
        }

        // Function to hide custom message box
        function hideMessageBox() {
            document.getElementById('messageBoxOverlay').classList.add('hidden');
        }

        function formatItineraryContent(itinerary) {
            return itinerary.map(item => `
                <div class="border border-gray-200 rounded-lg p-4 bg-white">
                    <h4 class="font-semibold text-lg mb-2 text-gray-800">${item.day}</h4>
                    <p class="text-gray-600">${item.activities}</p>
                </div>
            `).join('');
        }
        
        function renderTrip(tripId) {
            const data = tripData[tripId];
            if (!data) return;

            const template = document.getElementById('tripTemplate').content.cloneNode(true);
            const tripInfoDiv = template.querySelector('.trip-info');
            tripInfoDiv.dataset.tripId = tripId;

            tripInfoDiv.querySelector('[data-field="duration"]').innerHTML = data.duration;
            tripInfoDiv.querySelector('[data-field="cost"]').innerHTML = data.cost;
            tripInfoDiv.querySelector('[data-field="risk"]').innerHTML = data.risk;
            tripInfoDiv.querySelector('[data-field="intro"]').innerHTML = data.intro;
            tripInfoDiv.querySelector('[data-field="itinerary"]').innerHTML = formatItineraryContent(data.itinerary);
            tripInfoDiv.querySelector('[data-field="lodgingFood"]').innerHTML = data.lodgingFood;

            document.getElementById('trip-content').innerHTML = '';
            document.getElementById('trip-content').appendChild(template);

            renderCostBreakdownChart(tripId);
        }

        function renderCostBreakdownChart(tripId) {
            const data = tripData[tripId].costBreakdown;
            const canvas = document.querySelector(`[data-trip-id="${tripId}"] [data-field="costChart"]`);
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            
            if (chartInstances[tripId]) {
                chartInstances[tripId].destroy();
            }

            chartInstances[tripId] = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'PhÃ¢n bá»• chi phÃ­',
                        data: data.data,
                        backgroundColor: [
                            '#4A8D8E', '#80BDBB', '#A6D9D4', '#CDEAE5', '#E6F4F2'
                        ],
                        borderColor: '#F8F7F4',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: "'Be Vietnam Pro', sans-serif",
                                    size: 12
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(context.parsed * 1000);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }
        
        function renderCostComparisonChart() {
            const ctx = document.getElementById('costComparisonChart').getContext('2d');
            const labels = Object.values(tripData).map(trip => trip.name);
            const minCosts = Object.values(tripData).map(trip => trip.minCostForChart);
            const maxCosts = Object.values(tripData).map(trip => trip.maxCostForChart);
            const riskLevels = Object.values(tripData).map(trip => trip.riskLevelForChart);

            if (chartInstances['comparisonChart']) {
                chartInstances['comparisonChart'].destroy();
            }

            chartInstances['comparisonChart'] = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Chi phÃ­ Æ°á»›c tÃ­nh tá»‘i thiá»ƒu (triá»‡u VNÄ)',
                        data: minCosts,
                        backgroundColor: ['#80BDBB', '#4A8D8E', '#2F6C6D'],
                        borderRadius: 8
                    },
                    {
                        label: 'Rá»§i ro thá»i tiáº¿t (1=Tháº¥p, 2=TB, 3=Cao)',
                        data: riskLevels,
                        backgroundColor: ['#E57373', '#E57373', '#FFB74D'],
                        type: 'line',
                        yAxisID: 'y1',
                        borderColor: '#FFA726',
                        tension: 0.3,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Chi phÃ­ Æ°á»›c tÃ­nh (triá»‡u VNÄ)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + ' tr';
                                }
                            }
                        },
                        y: {
                           grid: { display: false }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            min: 0,
                            max: 4,
                            title: {
                                display: true,
                                text: 'Má»©c Ä‘á»™ rá»§i ro'
                            },
                            grid: {
                                drawOnChartArea: false, 
                            },
                            ticks: {
                                stepSize: 1,
                                callback: function(value) {
                                    if (value === 1) return 'Tháº¥p';
                                    if (value === 2) return 'TB';
                                    if (value === 3) return 'Cao';
                                    return '';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.dataset.type === 'line') {
                                        let riskText = '';
                                        if (context.parsed.x === 3) riskText = 'Cao';
                                        else if (context.parsed.x === 2) riskText = 'Trung bÃ¬nh';
                                        else riskText = 'Tháº¥p';
                                        label += riskText;
                                    } else {
                                        const tripIndex = context.dataIndex;
                                        const tripKey = Object.keys(tripData)[tripIndex];
                                        const minCost = tripData[tripKey].minCostForChart;
                                        const maxCost = tripData[tripKey].maxCostForChart;
                                        label = `Chi phÃ­: ${minCost} - ${maxCost} triá»‡u VNÄ`;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }});
        }
        
        function updateVoteCount(tripId) {
            const voterNameInput = document.getElementById('voterName');
            const voterName = voterNameInput.value.trim();

            if (!voterName) {
                showMessageBox('Lá»—i!', 'Vui lÃ²ng nháº­p tÃªn cá»§a báº¡n Ä‘á»ƒ bÃ¬nh chá»n.');
                return;
            }

            fetch('http://127.0.0.1:5000/vote', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: voterName, choice: tripId })
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    // Sau khi vote thÃ nh cÃ´ng, láº¥y láº¡i sá»‘ vote má»›i nháº¥t tá»« server
                    fetch('http://127.0.0.1:5000/votes')
                        .then(res => res.json())
                        .then(votesData => {
                            for (const vote of votesData) {
                                const id = vote['Lá»±a chá»n'];
                                const count = vote.count;
                                if (tripData[id]) {
                                    tripData[id].votes = count;
                                    if (document.getElementById(`votes-${id}`)) {
                                        document.getElementById(`votes-${id}`).innerText = count;
                                    }
                                }
                            }
                        });
                    showMessageBox('ThÃ nh cÃ´ng!', `Cáº£m Æ¡n ${voterName}! Báº¡n Ä‘Ã£ bÃ¬nh chá»n cho chuyáº¿n ${tripData[tripId].name}.`);
                    voterNameInput.value = '';
                } else {
                    showMessageBox('ThÃ´ng bÃ¡o!', data.message);
                }
            })
            .catch(() => {
                showMessageBox('Lá»—i!', 'KhÃ´ng thá»ƒ káº¿t ná»‘i tá»›i mÃ¡y chá»§. Vui lÃ²ng thá»­ láº¡i sau.');
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-button');
            const voteButtons = document.querySelectorAll('.vote-button');
            const messageBoxCloseButton = document.getElementById('messageBoxClose');
            const messageBoxOverlay = document.getElementById('messageBoxOverlay');

            // Load votes and voter history from localStorage
            const storedVotes = localStorage.getItem('tripVotes');
            const storedVoterHistory = localStorage.getItem('voterHistory');

            if (storedVotes) {
                const parsedVotes = JSON.parse(storedVotes);
                for (const tripId in parsedVotes) {
                    if (tripData.hasOwnProperty(tripId)) {
                        tripData[tripId].votes = parsedVotes[tripId];
                    }
                }
            }
            if (storedVoterHistory) {
                voterHistory = JSON.parse(storedVoterHistory);
            }

            function setActiveTrip(tripId) {
                renderTrip(tripId);
                navButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.trip === tripId);
                });
            }

            navButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    setActiveTrip(e.target.dataset.trip);
                });
            });

            voteButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const tripId = e.target.dataset.tripVote;
                    updateVoteCount(tripId);
                });
            });

            messageBoxCloseButton.addEventListener('click', hideMessageBox);
            messageBoxOverlay.addEventListener('click', (e) => {
                if (e.target === messageBoxOverlay) { // Close only when clicking outside the box
                    hideMessageBox();
                }
            });

            // Initialize vote counts on page load
            for (const tripId in tripData) {
                if (tripData.hasOwnProperty(tripId)) {
                    document.getElementById(`votes-${tripId}`).innerText = tripData[tripId].votes;
                }
            }

            renderCostComparisonChart();
            setActiveTrip('coto');
        });
    </script>
</body>
</html>